import{a as Yt}from"./chunk-GHMA476I.js";import{a as J,b as L,c as Q,d as ee,e as He,f as _e,g as te,h as fe,i as ge,j as ve,k as be,l as Ee,m as re,n as Qt,o as $e,p as ye,q as Se,r as ae,s as yt}from"./chunk-WQHD2QWN.js";import{$ as ke,$a as Jt,A,Aa as Be,B as ht,Ba as Le,C as g,Ca as T,D as v,Da as Et,E as ue,Ea as N,F as Ae,Fa as z,G as Ft,Ga as $t,Ja as Ve,K as _t,L as pe,La as je,M as kt,N as l,Na as X,O as Pt,Oa as k,Pa as B,Q as y,Qa as U,R as E,Ra as M,Sa as Wt,Ta as q,Ua as zt,V as m,Va as Ge,W as ft,X as Fe,Xa as me,Y as gt,Ya as he,Za as oe,_ as Bt,_a as qt,a as Y,aa as c,ab as Ue,b as de,ba as t,bb as De,c as wt,ca as e,d as Z,da as p,e as Rt,ea as vt,fa as bt,g as ct,ga as V,h as ut,ha as S,ia as _,j as ne,ja as Lt,k as xt,ka as Vt,l as Re,la as jt,m as Tt,ma as Gt,n as Ne,na as Ut,o as pt,oa as D,p as Mt,pa as xe,q as It,qa as Pe,r as H,ra as n,s as Nt,sa as h,t as mt,ta as b,ua as W,va as C,w as $,wa as O,xa as w,y as At,ya as Ht,z as ce}from"./chunk-JNNCZCZI.js";function di(a,i){if(a&1){let o=V();t(0,"tr")(1,"td",24),n(2),e(),t(3,"td",24),n(4),e(),t(5,"td",24),n(6),e(),t(7,"td",24),n(8),e(),t(9,"td",24),n(10),e(),t(11,"td",24),n(12),e(),t(13,"td",24),n(14),T(15,"date"),e(),t(16,"td",63)(17,"button",64),S("click",function(){let s=g(o).$implicit,d=_();return v(d.abrirModalEditar(s.id))}),p(18,"i",65),n(19," Editar"),e(),t(20,"button",66),S("click",function(){let s=g(o).$implicit,d=_();return v(d.confirmarEliminacion(s.id,s.titulo))}),p(21,"i",67),n(22," Eliminar "),e()()()}if(a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),h(o.titulo),l(2),h(o.autor),l(2),h(o.isbn),l(2),h(o.editorial),l(2),h(o.genero),l(2),h(N(15,7,o.fechaPublicacion,"dd/MM/yyyy"))}}function ci(a,i){a&1&&(t(0,"div",68),n(1,"El t\xEDtulo es requerido "),e())}function ui(a,i){a&1&&(t(0,"div",68),n(1,"El autor es requerido"),e())}function pi(a,i){a&1&&(t(0,"div"),n(1,"El ISBN es requerido"),e())}function mi(a,i){a&1&&(t(0,"div"),n(1,"Formato ISBN-10 o ISBN-13 v\xE1lido"),e())}function hi(a,i){if(a&1&&(t(0,"div",68),m(1,pi,2,0,"div",69)(2,mi,2,0,"div",69),e()),a&2){_();let o=D(64);l(),c("ngIf",o.errors==null?null:o.errors.required),l(),c("ngIf",o.errors==null?null:o.errors.pattern)}}function _i(a,i){a&1&&(t(0,"div",68),n(1,"La editorial es requerida"),e())}function fi(a,i){a&1&&(t(0,"div",68),n(1,"El g\xE9nero es requerido "),e())}function gi(a,i){a&1&&(t(0,"div",68),n(1," La fecha es requerida "),e())}function vi(a,i){a&1&&(t(0,"div",68),n(1,"La URL es requerida "),e())}function bi(a,i){a&1&&(t(0,"div",68),n(1," El t\xEDtulo es requerido "),e())}function Ei(a,i){a&1&&(t(0,"div",68),n(1," El autor es requerido "),e())}function yi(a,i){a&1&&(t(0,"div"),n(1,"El ISBN es requerido"),e())}function Si(a,i){a&1&&(t(0,"div"),n(1,"Formato ISBN-10 o ISBN-13 v\xE1lido"),e())}function Di(a,i){if(a&1&&(t(0,"div",68),m(1,yi,2,0,"div",69)(2,Si,2,0,"div",69),e()),a&2){_();let o=D(28);l(),c("ngIf",o.errors==null?null:o.errors.required),l(),c("ngIf",o.errors==null?null:o.errors.pattern)}}function Ci(a,i){a&1&&(t(0,"div",68),n(1," La editorial es requerida "),e())}function Oi(a,i){a&1&&(t(0,"div",68),n(1," El g\xE9nero es requerido "),e())}function wi(a,i){a&1&&(t(0,"div",68),n(1," La fecha es requerida "),e())}function Ri(a,i){a&1&&(t(0,"div",68),n(1," La URL es requerida "),e())}function xi(a,i){if(a&1){let o=V();t(0,"div",70)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",71),n(5,"Editar Libro"),e(),p(6,"button",35),e(),t(7,"div",36)(8,"form",38,8),S("ngSubmit",function(){g(o);let s=D(9),d=_();return v(d.actualizarLibro(s))}),t(10,"input",72),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.id,s)||(d.libroEditando.id=s),v(s)}),e(),t(11,"div",39)(12,"div",40)(13,"label",73),n(14,"T\xEDtulo del libro"),e(),t(15,"input",74,9),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.titulo,s)||(d.libroEditando.titulo=s),v(s)}),e(),m(17,bi,2,0,"div",43),e(),t(18,"div",40)(19,"label",75),n(20,"Nombre del Autor"),e(),t(21,"input",76,10),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.autor,s)||(d.libroEditando.autor=s),v(s)}),e(),m(23,Ei,2,0,"div",43),e(),t(24,"div",46)(25,"label",77),n(26,"N\xFAmero de ISBN"),e(),t(27,"input",78,11),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.isbn,s)||(d.libroEditando.isbn=s),v(s)}),e(),m(29,Di,3,2,"div",43),e(),t(30,"div",46)(31,"label",79),n(32,"Nombre de Editorial"),e(),t(33,"input",80,12),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.editorial,s)||(d.libroEditando.editorial=s),v(s)}),e(),m(35,Ci,2,0,"div",43),e(),t(36,"div",46)(37,"label",81),n(38,"G\xE9nero Literario"),e(),t(39,"input",82,13),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.genero,s)||(d.libroEditando.genero=s),v(s)}),e(),m(41,Oi,2,0,"div",43),e(),t(42,"div",46)(43,"label",83),n(44,"Fecha de Publicaci\xF3n"),e(),t(45,"input",84,14),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.fechaPublicacion,s)||(d.libroEditando.fechaPublicacion=s),v(s)}),e(),m(47,wi,2,0,"div",43),e(),t(48,"div",40)(49,"label",85),n(50,"Url de la Portada"),e(),t(51,"input",86,15),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.imagenUrl,s)||(d.libroEditando.imagenUrl=s),v(s)}),e(),m(53,Ri,2,0,"div",43),e(),t(54,"div",40)(55,"label",87),n(56,"Descripci\xF3n / Sinopsis"),e(),t(57,"textarea",88),w("ngModelChange",function(s){g(o);let d=_();return O(d.libroEditando.descripcion,s)||(d.libroEditando.descripcion=s),v(s)}),e()()(),t(58,"div",59)(59,"button",60),n(60,"Cancelar"),e(),t(61,"button",61),n(62,"Actualizar"),e()()()()()()()}if(a&2){let o=i.$implicit,r=D(9),s=D(16),d=D(22),u=D(28),f=D(34),R=D(40),x=D(46),F=D(52),I=_();c("id","modalEditar__"+o.id),l(10),C("ngModel",I.libroEditando.id),l(5),C("ngModel",I.libroEditando.titulo),l(2),c("ngIf",s.invalid&&s.touched),l(4),C("ngModel",I.libroEditando.autor),l(2),c("ngIf",d.invalid&&d.touched),l(4),C("ngModel",I.libroEditando.isbn),l(2),c("ngIf",u.invalid&&u.touched),l(4),C("ngModel",I.libroEditando.editorial),l(2),c("ngIf",f.invalid&&f.touched),l(4),C("ngModel",I.libroEditando.genero),l(2),c("ngIf",R.invalid&&R.touched),l(4),C("ngModel",I.libroEditando.fechaPublicacion),l(2),c("ngIf",x.invalid&&x.touched),l(4),C("ngModel",I.libroEditando.imagenUrl),l(2),c("ngIf",F.invalid&&F.touched),l(4),C("ngModel",I.libroEditando.descripcion),l(4),c("disabled",!r.valid)}}var We=class a{constructor(i){this.librosService=i}libros=[];terminoBusqueda="";libroEditando=null;libro={titulo:"",autor:"",isbn:"",editorial:"",genero:"",fechaPublicacion:"",descripcion:"",imagenUrl:""};submittedEdit=!1;ngOnInit(){this.cargarLibros()}cargarLibros(){this.librosService.getLibros().subscribe({next:i=>this.libros=i,error:i=>console.error("Error al cargar libros",i)})}buscarLibros(){this.terminoBusqueda.trim()?this.librosService.buscarLibros(this.terminoBusqueda).subscribe({next:i=>this.libros=i,error:i=>console.error("Error al buscar libros",i)}):this.cargarLibros()}guardarLibro(){this.librosService.crearLibro(this.libro).subscribe({next:()=>{this.cargarLibros(),this.resetFormulario();let i=document.getElementById("agregarLibro");i&&bootstrap.Modal.getInstance(i)?.hide()},error:i=>console.error("Error al guardar libro",i)})}resetFormulario(){this.libro={titulo:"",autor:"",isbn:"",editorial:"",genero:"",fechaPublicacion:"",descripcion:"",imagenUrl:""}}confirmarEliminacion(i,o){confirm(`\xBFEst\xE1 seguro de que desea eliminar el libro "${o}"?`)&&this.eliminarLibro(i)}eliminarLibro(i){this.librosService.eliminarLibro(i).subscribe({next:()=>{this.cargarLibros()},error:o=>{console.error("Error al eliminar libro",o),alert("No se pudo eliminar el libro")}})}abrirModalEditar(i){this.submittedEdit=!1,this.librosService.getLibro(i).subscribe({next:o=>{this.libroEditando=Y({},o),this.libroEditando.fechaPublicacion&&(this.libroEditando.fechaPublicacion=this.libroEditando.fechaPublicacion.split("T")[0]),setTimeout(()=>{let r=document.getElementById(`modalEditar__${i}`);r&&new bootstrap.Modal(r).show()})},error:o=>console.error("Error al cargar libro",o)})}actualizarLibro(i){this.submittedEdit=!0,!i.invalid&&this.libroEditando&&this.librosService.actualizarLibro(this.libroEditando).subscribe({next:()=>{this.cargarLibros(),this.cerrarModalEditar(this.libroEditando.id),this.submittedEdit=!1},error:o=>{console.error("Error al actualizar libro",o),this.submittedEdit=!1}})}cerrarModalEditar(i){let o=document.getElementById(`modalEditar__${i}`);o&&bootstrap.Modal.getInstance(o)?.hide(),this.libroEditando=null}static \u0275fac=function(o){return new(o||a)(y(De))};static \u0275cmp=E({type:a,selectors:[["app-libros"]],decls:100,vars:19,consts:[["formLibro","ngForm"],["titulo","ngModel"],["autor","ngModel"],["isbn","ngModel"],["editorial","ngModel"],["genero","ngModel"],["fechaPublicacion","ngModel"],["imagenUrl","ngModel"],["formEditar","ngForm"],["editTitulo","ngModel"],["editAutor","ngModel"],["editIsbn","ngModel"],["editEditorial","ngModel"],["editGenero","ngModel"],["editFecha","ngModel"],["editImagen","ngModel"],[1,"container-fluid"],[1,"row","mt-4"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Ingrese el nombre del libro",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center"],[1,"col-2"],["type","button","data-bs-toggle","modal","data-bs-target","#agregarLibro",1,"btn","btn-primary"],[1,"bi","bi-plus-circle"],["id","agregarLibro","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","errorMessages",1,"alert","alert-danger","d-none"],["novalidate","",3,"ngSubmit"],[1,"row","g-3"],[1,"col-12"],["for","inputTitulo",1,"form-label"],["type","text","id","inputTitulo","placeholder","T\xEDtulo","name","titulo","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["for","inputAutor",1,"form-label"],["type","text","id","inputAutor","placeholder","Autor","name","autor","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["for","inputIsbn",1,"form-label"],["type","text","id","inputIsbn","placeholder","ISBN","name","isbn","required","","pattern","^(?=(?:\\D*\\d){10}(?:(?:\\D*\\d){3})?$)[\\d-]+$",1,"form-control",3,"ngModelChange","ngModel"],["for","inputEditorial",1,"form-label"],["type","text","id","inputEditorial","placeholder","Editorial","name","editorial","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputGenero",1,"form-label"],["type","text","id","inputGenero","placeholder","G\xE9nero","name","genero","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputFechaPublicacion",1,"form-label"],["type","date","id","inputFechaPublicacion","name","fechaPublicacion","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputUrl",1,"form-label"],["type","text","id","inputUrl","placeholder","Link de la imagen de portada","name","imagenUrl","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputDescripcion",1,"form-label"],["id","inputDescripcion","rows","4","placeholder","Breve descripci\xF3n del libro","name","descripcion",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","modal fade","tabindex","-1","aria-hidden","true",3,"id",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],[1,"text-danger"],[4,"ngIf"],["tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-title"],["type","hidden","name","id",3,"ngModelChange","ngModel"],["for","editTitulo",1,"form-label"],["type","text","id","editTitulo","placeholder","T\xEDtulo","name","titulo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editAutor",1,"form-label"],["type","text","id","editAutor","placeholder","Autor","name","autor","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editIsbn",1,"form-label"],["type","text","id","editIsbn","placeholder","ISBN","name","isbn","required","","pattern","^(?=(?:\\D*\\d){10}(?:(?:\\D*\\d){3})?$)[\\d-]+$",1,"form-control",3,"ngModelChange","ngModel"],["for","editEditorial",1,"form-label"],["type","text","id","editEditorial","placeholder","Editorial","name","editorial","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editGenero",1,"form-label"],["type","text","id","editGenero","placeholder","G\xE9nero","name","genero","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editFecha",1,"form-label"],["type","date","id","editFecha","name","fechaPublicacion","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editImagen",1,"form-label"],["type","text","id","editImagen","placeholder","Link de la imagen de portada","name","imagenUrl","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editDescripcion",1,"form-label"],["id","editDescripcion","rows","4","placeholder","Breve descripci\xF3n del libro","name","descripcion",1,"form-control",3,"ngModelChange","ngModel"]],template:function(o,r){if(o&1){let s=V();t(0,"div",16)(1,"div",17)(2,"h2"),n(3,"Lista de Libros"),e(),t(4,"div",18)(5,"div",19)(6,"input",20),w("ngModelChange",function(u){return g(s),O(r.terminoBusqueda,u)||(r.terminoBusqueda=u),v(u)}),e(),t(7,"button",21),S("click",function(){return g(s),v(r.buscarLibros())}),n(8,"Buscar"),e()()(),t(9,"div",22)(10,"table",23)(11,"thead")(12,"tr")(13,"th",24),n(14,"#"),e(),t(15,"th",24),n(16,"T\xEDtulo"),e(),t(17,"th",24),n(18,"Autor"),e(),t(19,"th",24),n(20,"ISBN"),e(),t(21,"th",24),n(22,"Editorial"),e(),t(23,"th",24),n(24,"G\xE9nero"),e(),t(25,"th",24),n(26,"A\xF1o de Publicaci\xF3n"),e(),t(27,"th",24),n(28,"Acciones"),e()()(),t(29,"tbody"),m(30,di,23,10,"tr",25),e()()(),t(31,"div",26)(32,"div",27)(33,"button",28),p(34,"i",29),n(35," Agregar Libro "),e()()()()(),t(36,"div",30)(37,"div",31)(38,"div",32)(39,"div",33)(40,"h1",34),n(41,"Agregar Libro"),e(),p(42,"button",35),e(),t(43,"div",36),p(44,"div",37),t(45,"form",38,0),S("ngSubmit",function(){return g(s),v(r.guardarLibro())}),t(47,"div",39)(48,"div",40)(49,"label",41),n(50,"T\xEDtulo del libro"),e(),t(51,"input",42,1),w("ngModelChange",function(u){return g(s),O(r.libro.titulo,u)||(r.libro.titulo=u),v(u)}),e(),m(53,ci,2,0,"div",43),e(),t(54,"div",40)(55,"label",44),n(56,"Nombre del Autor"),e(),t(57,"input",45,2),w("ngModelChange",function(u){return g(s),O(r.libro.autor,u)||(r.libro.autor=u),v(u)}),e(),m(59,ui,2,0,"div",43),e(),t(60,"div",46)(61,"label",47),n(62,"N\xFAmero de ISBN"),e(),t(63,"input",48,3),w("ngModelChange",function(u){return g(s),O(r.libro.isbn,u)||(r.libro.isbn=u),v(u)}),e(),m(65,hi,3,2,"div",43),e(),t(66,"div",46)(67,"label",49),n(68,"Nombre de Editorial"),e(),t(69,"input",50,4),w("ngModelChange",function(u){return g(s),O(r.libro.editorial,u)||(r.libro.editorial=u),v(u)}),e(),m(71,_i,2,0,"div",43),e(),t(72,"div",46)(73,"label",51),n(74,"G\xE9nero Literario"),e(),t(75,"input",52,5),w("ngModelChange",function(u){return g(s),O(r.libro.genero,u)||(r.libro.genero=u),v(u)}),e(),m(77,fi,2,0,"div",43),e(),t(78,"div",46)(79,"label",53),n(80,"Fecha de Publicaci\xF3n"),e(),t(81,"input",54,6),w("ngModelChange",function(u){return g(s),O(r.libro.fechaPublicacion,u)||(r.libro.fechaPublicacion=u),v(u)}),e(),m(83,gi,2,0,"div",43),e(),t(84,"div",40)(85,"label",55),n(86,"Url de la Portada"),e(),t(87,"input",56,7),w("ngModelChange",function(u){return g(s),O(r.libro.imagenUrl,u)||(r.libro.imagenUrl=u),v(u)}),e(),m(89,vi,2,0,"div",43),e(),t(90,"div",40)(91,"label",57),n(92,"Descripci\xF3n / Sinopsis"),e(),t(93,"textarea",58),w("ngModelChange",function(u){return g(s),O(r.libro.descripcion,u)||(r.libro.descripcion=u),v(u)}),e()()(),t(94,"div",59)(95,"button",60),n(96,"Cerrar"),e(),t(97,"button",61),n(98,"Guardar"),e()()()()()()(),m(99,xi,63,18,"div",62)}if(o&2){let s=D(46),d=D(52),u=D(58),f=D(64),R=D(70),x=D(76),F=D(82),I=D(88);l(6),C("ngModel",r.terminoBusqueda),l(24),c("ngForOf",r.libros),l(21),C("ngModel",r.libro.titulo),l(2),c("ngIf",d.invalid&&d.touched),l(4),C("ngModel",r.libro.autor),l(2),c("ngIf",u.invalid&&u.touched),l(4),C("ngModel",r.libro.isbn),l(2),c("ngIf",f.invalid&&f.touched),l(4),C("ngModel",r.libro.editorial),l(2),c("ngIf",R.invalid&&R.touched),l(4),C("ngModel",r.libro.genero),l(2),c("ngIf",x.invalid&&x.touched),l(4),C("ngModel",r.libro.fechaPublicacion),l(2),c("ngIf",F.invalid&&F.touched),l(4),C("ngModel",r.libro.imagenUrl),l(2),c("ngIf",I.invalid&&I.touched),l(4),C("ngModel",r.libro.descripcion),l(4),c("disabled",!s.valid),l(2),c("ngForOf",r.libros)}},dependencies:[M,k,B,U,Se,te,J,Q,ee,re,$e,_e,He],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red;border-radius:3px}.alert[_ngcontent-%COMP%]{color:red;font-size:10px;margin-bottom:0}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}"]})};var Ce=class a{constructor(i){this.http=i}apiUrl="http://localhost:8080/api/usuarios";getUsuarios(){return this.http.get(this.apiUrl)}getUsuario(i){return this.http.get(`${this.apiUrl}/${i}`)}desactivarUsuario(i){return this.http.put(`${this.apiUrl}/${i}/desactivar`,{})}activarUsuario(i){return this.http.put(`${this.apiUrl}/${i}/activar`,{})}buscarUsuarios(i){return this.http.get(`${this.apiUrl}/buscar`,{params:{q:i}})}static \u0275fac=function(o){return new(o||a)(ce(q))};static \u0275prov=$({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ie=(s=>(s.DISPONIBLE="DISPONIBLE",s.RESERVADO="RESERVADO",s.PRESTADO="PRESTADO",s.EN_REPARACION="EN_REPARACION",s))(Ie||{});var Oe=class a{constructor(i){this.http=i}apiUrl="http://localhost:8080/api/ejemplares";getEjemplares(){return this.http.get(this.apiUrl)}getEjemplar(i){return this.http.get(`${this.apiUrl}/${i}`)}crearEjemplar(i){let o=de(Y({},i),{libro:i.libroId?{id:i.libroId}:null});return this.http.post(this.apiUrl,o)}actualizarEjemplar(i){return this.http.put(`${this.apiUrl}/${i.id}`,i)}eliminarEjemplar(i){return this.http.delete(`${this.apiUrl}/${i}`)}getEstados(){return Object.values(Ie)}static \u0275fac=function(o){return new(o||a)(ce(q))};static \u0275prov=$({token:a,factory:a.\u0275fac,providedIn:"root"})};var ie=class a{constructor(i){this.http=i}apiUrl="http://localhost:8080/api/reservas";getReservas(){return this.http.get(this.apiUrl)}getReservasPendientes(){return this.http.get(`${this.apiUrl}/pendientes`)}getReservasAtrasadas(){return this.http.get(`${this.apiUrl}/atrasadas`)}getReservasRecientes(){return this.http.get(`${this.apiUrl}/recientes`)}static \u0275fac=function(o){return new(o||a)(ce(q))};static \u0275prov=$({token:a,factory:a.\u0275fac,providedIn:"root"})};function Ti(a,i){if(a&1&&(t(0,"p",17),n(1),e()),a&2){let o=_();l(),b(" ",o.usuarios.length," ")}}function Mi(a,i){a&1&&(t(0,"div",18),p(1,"div",19),e())}function Ii(a,i){if(a&1&&(t(0,"p",17),n(1),e()),a&2){let o=_();l(),b(" ",o.ejemplares.length," ")}}function Ni(a,i){a&1&&(t(0,"div",18),p(1,"div",19),e())}function Ai(a,i){if(a&1&&(t(0,"p",17),n(1),e()),a&2){let o=_();l(),b(" ",o.reservasPendientes.length," ")}}function Fi(a,i){a&1&&(t(0,"div",18),p(1,"div",19),e())}function ki(a,i){if(a&1&&(t(0,"p",17),n(1),e()),a&2){let o=_();l(),b(" ",o.reservasAtrasadas.length," ")}}function Pi(a,i){a&1&&(t(0,"div",18),p(1,"div",19),e())}function Bi(a,i){if(a&1&&(t(0,"tr")(1,"td",15),n(2),e(),t(3,"td",15),n(4),e(),t(5,"td",15),n(6),e(),t(7,"td",15),n(8),e(),t(9,"td",15),n(10),T(11,"date"),e(),t(12,"td",15),n(13),T(14,"date"),e(),t(15,"td",15)(16,"span",20),n(17),T(18,"date"),e()(),t(19,"td",15),n(20),e()()),a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),W("",o.user.nombres," ",o.user.apellidos),l(2),h(o.ejemplar.libro==null?null:o.ejemplar.libro.titulo),l(2),h(o.ejemplar.codigoEjemplar),l(2),h(N(11,10,o.fechaReserva,"dd/MM/yyyy")),l(3),h(N(14,13,o.fechaEstimadaDevolucion,"dd/MM/yyyy")),l(3),c("ngClass",o.fechaRealDevolucion==null?"text-danger":"text-dark"),l(),b(" ",o.fechaRealDevolucion==null?"No devuelto":N(18,16,o.fechaRealDevolucion,"dd/MM/yyyy")," "),l(3),h(o.estado)}}var qe=class a{constructor(i,o,r){this.usuariosService=i;this.ejemplarresService=o;this.reservasService=r}usuarios=[];ejemplares=[];reservasPendientes=[];reservasAtrasadas=[];reservasRecientes=[];ngOnInit(){this.cargarUsuarios(),this.cargarEjemplares(),this.cargarReservasAtrasadas(),this.cargarReservasPendientes(),this.cargarRecientes()}cargarRecientes(){this.reservasService.getReservasRecientes().subscribe({next:i=>this.reservasRecientes=i,error:i=>console.error("Error al cargar reservas recientes",i)})}cargarReservasPendientes(){this.reservasService.getReservasPendientes().subscribe({next:i=>this.reservasPendientes=i,error:i=>console.error("Error al cargar reservas pendientes",i)})}cargarReservasAtrasadas(){this.reservasService.getReservasAtrasadas().subscribe({next:i=>this.reservasAtrasadas=i,error:i=>console.error("Error al cargar reservas atrasadas",i)})}cargarUsuarios(){this.usuariosService.getUsuarios().subscribe({next:i=>this.usuarios=i,error:i=>console.error("Error al cargar usuarios",i)})}cargarEjemplares(){this.ejemplarresService.getEjemplares().subscribe({next:i=>this.ejemplares=i,error:i=>console.error("Error al cargar ejemplares",i)})}static \u0275fac=function(o){return new(o||a)(y(Ce),y(Oe),y(ie))};static \u0275cmp=E({type:a,selectors:[["app-dashboard"]],decls:62,vars:9,consts:[["cargando",""],[1,"container-fluid","mt-1","mb-1"],[1,"row"],[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","p-2","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"col-lg-3","col-md-6"],[1,"card","text-white","bg-primary","mb-4","d-flex","justify-content-center","align-items-center"],[1,"card-body","w-75"],[1,"card-title","text-center"],["class","card-text fs-2 text-center",4,"ngIf","ngIfElse"],[1,"card","text-white","bg-success","mb-4","d-flex","justify-content-center","align-items-center"],[1,"card","text-white","bg-warning","mb-4","d-flex","justify-content-center","align-items-center"],[1,"card","text-white","bg-danger","mb-4","d-flex","justify-content-center","align-items-center"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"card-text","fs-2","text-center"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","spinner-border-sm"],[3,"ngClass"]],template:function(o,r){if(o&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),n(4,"Datos Generales"),e()(),t(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),n(9,"Total de Usuarios"),e(),m(10,Ti,2,1,"p",9)(11,Mi,2,0,"ng-template",null,0,z),e()()(),t(13,"div",5)(14,"div",10)(15,"div",7)(16,"h5",8),n(17,"Ejemplares Disponibles"),e(),m(18,Ii,2,1,"p",9)(19,Ni,2,0,"ng-template",null,0,z),e()()(),t(21,"div",5)(22,"div",11)(23,"div",7)(24,"h5",8),n(25,"Devoluciones Pendientes"),e(),m(26,Ai,2,1,"p",9)(27,Fi,2,0,"ng-template",null,0,z),e()()(),t(29,"div",5)(30,"div",12)(31,"div",7)(32,"h5",8),n(33,"Devoluciones Atrasadas"),e(),m(34,ki,2,1,"p",9)(35,Pi,2,0,"ng-template",null,0,z),e()()()()(),t(37,"div",1)(38,"h2"),n(39,"Reservas Recientes"),e(),t(40,"div",13)(41,"table",14)(42,"thead")(43,"tr")(44,"th",15),n(45,"#"),e(),t(46,"th",15),n(47,"Usuario"),e(),t(48,"th",15),n(49,"Libro"),e(),t(50,"th",15),n(51,"C\xF3digo de ejemplar"),e(),t(52,"th",15),n(53,"Fecha Reserva"),e(),t(54,"th",15),n(55,"Fecha Estimada de Devoluci\xF3n"),e(),t(56,"th",15),n(57,"Fecha Real de Devoluci\xF3n"),e(),t(58,"th",15),n(59,"Estado"),e()()(),t(60,"tbody"),m(61,Bi,21,19,"tr",16),e()()()()),o&2){let s=D(12);l(10),c("ngIf",r.usuarios.length)("ngIfElse",s),l(8),c("ngIf",r.ejemplares.length)("ngIfElse",s),l(8),c("ngIf",r.reservasPendientes.length)("ngIfElse",s),l(8),c("ngIf",r.reservasAtrasadas.length)("ngIfElse",s),l(27),c("ngForOf",r.reservasRecientes)}},dependencies:[M,X,k,B,U],encapsulation:2})};var Je=class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=E({type:a,selectors:[["app-principal"]],decls:207,vars:0,consts:[[1,"container","mt-5","text-center"],[1,"mb-4"],["role","search",1,"d-flex","search-bar"],["type","search","placeholder","Buscar Libros...","aria-label","Buscar",1,"form-control","me-2"],["type","submit",1,"btn","custom-search-btn"],[1,"bi","bi-search"],["id","carouselExampleIndicators","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","1","aria-label","Slide 2"],[1,"carousel-inner"],[1,"carousel-item","active","custom-carrusel"],["src","https://www.muniate.gob.pe/wp-content/uploads/2025/03/Portada-para-web-01-2-scaled.jpg","alt","...",1,"d-block","w-100"],[1,"carousel-item","custom-carrusel"],["src","https://www.muniate.gob.pe/wp-content/uploads/2025/03/Portada-para-web-02-scaled.jpg","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"container","my-4","custom-titulo"],[1,"fw-bold","text-primary","border-bottom","border-3","text-start"],[1,"container","my-5"],[1,"row"],[1,"col-md-6","mb-4"],[1,"card","shadow-sm"],["src","https://th.bing.com/th/id/OIP.wfg5oTFAuxtuQLDsNDMAjQHaFa?rs=1&pid=ImgDetMain","alt","Imagen",1,"card-img-top"],[1,"col-md-6","d-flex","align-items-center"],[1,"p-4","shadow","rounded-4","bg-light"],[1,"text-primary","fw-bold","mb-3"],[1,"text-center","text-muted","fs-5.5","custom-text"],[1,"row","text-center","justify-content-center","gy-4"],[1,"col-6","col-md-2"],[1,"bi","bi-book-half","fs-2","text-primary"],[1,"fw-semibold","mt-2"],[1,"bi","bi-shield-lock","fs-2","text-success"],[1,"bi","bi-heart-fill","fs-2","text-danger"],[1,"bi","bi-stars","fs-2","text-warning"],[1,"bi","bi-globe2","fs-2","text-info"],[1,"bi","bi-journal-richtext","fs-2","text-secondary"],[1,"bi","bi-trophy","fs-2","text-warning"],[1,"bi","bi-building","fs-2","text-dark"],[1,"bi","bi-binoculars","fs-2","text-primary"],[1,"bi","bi-person-video3","fs-2","text-danger"],[1,"col-md-4","mb-4"],[1,"card","h-100","shadow-sm"],["src","https://th.bing.com/th/id/OIP.G-Tbg4_Lvo1TLqyhTu82RwHaFj?rs=1&pid=ImgDetMain","alt","Imagen 1",1,"card-img-top","custom-card-img"],[1,"card-body","d-flex","flex-column"],[1,"card-title","text-center","text-primary","fw-bold","mb-3"],[1,"card-text","text-center","text-muted","fs-5.5","custom-text"],["src","https://proyectosti.muniate.gob.pe/areas/GDSIS/images/biblioteca/3.jpg","alt","Imagen 2",1,"card-img-top","custom-card-img"],["src","https://th.bing.com/th/id/OIP.MrFRn8khgZWTSatiAde6-wAAAA?pid=ImgDet&w=370&h=270&rs=1","alt","Imagen 3",1,"card-img-top","custom-card-img"],[1,"table-responsive"],[1,"table","table-bordered","text-center","align-middle"],[1,"table-dark"],["colspan","2"],[1,"col-md-6"],[1,"ratio","ratio-4x3","rounded","shadow"],["src",kt`https://www.google.com/maps?q=Carretera+Central+7.5km+Vitarte+Ate+Lima+Peru&output=embed`,"width","100%","height","100%","allowfullscreen","","loading","lazy",2,"border","0"],[1,"text-primary","fw-bold"],[1,"mb-1"],[0,"th","if","${registroExitoso}",1,"position-fixed","bottom-0","end-0","p-3",2,"z-index","11"],["id","registroToast","role","alert","aria-live","assertive","aria-atomic","true",1,"toast","show"],[1,"toast-header","bg-success","text-white"],[1,"me-auto"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white"],[1,"toast-body"]],template:function(o,r){o&1&&(t(0,"body")(1,"div",0)(2,"h2",1),n(3,"Bienvenido al portal"),e(),t(4,"form",2),p(5,"input",3),t(6,"button",4),p(7,"i",5),e()()(),t(8,"div",6)(9,"div",7),p(10,"button",8)(11,"button",9),e(),t(12,"div",10)(13,"div",11),p(14,"img",12),e(),t(15,"div",13),p(16,"img",14),e()(),t(17,"button",15),p(18,"span",16),t(19,"span",17),n(20,"Previous"),e()(),t(21,"button",18),p(22,"span",19),t(23,"span",17),n(24,"Next"),e()()(),t(25,"div",20)(26,"h2",21),n(27,"Nuestra Biblioteca Municipal"),e()(),t(28,"div",22)(29,"div",23)(30,"div",24)(31,"div",25),p(32,"img",26),e()(),t(33,"div",27)(34,"div",28)(35,"h3",29),n(36,"Biblioteca Municipal de Ate"),e(),t(37,"p",30),n(38," La Biblioteca Municipal de Ate \u2018C\xE9sar Vallejo\u2019 remonta sus inicios a principios de la d\xE9cada de 1970, como una iniciativa impulsada por las autoridades locales y miembros de la comunidad con el objetivo de fomentar el desarrollo educativo y cultural del distrito. La idea central fue crear un espacio accesible, acogedor y bien equipado que sirviera como punto de encuentro para la juventud estudiosa, brind\xE1ndoles la oportunidad de cultivar el h\xE1bito de la lectura, la investigaci\xF3n y el aprendizaje autodidacta. Desde sus primeros a\xF1os, la biblioteca ha buscado convertirse en un referente cultural, promoviendo actividades que estimulen el pensamiento cr\xEDtico, la creatividad y el amor por el conocimiento entre los vecinos de Ate. "),e()()()()(),t(39,"div",20)(40,"h2",21),n(41,"Escoge un genero literario"),e()(),t(42,"div",22)(43,"div",31)(44,"div",32),p(45,"i",33),t(46,"p",34),n(47,"Ficci\xF3n"),e()(),t(48,"div",32),p(49,"i",35),t(50,"p",34),n(51,"Misterio"),e()(),t(52,"div",32),p(53,"i",36),t(54,"p",34),n(55,"Romance"),e()(),t(56,"div",32),p(57,"i",37),t(58,"p",34),n(59,"Fantas\xEDa"),e()(),t(60,"div",32),p(61,"i",38),t(62,"p",34),n(63,"Ciencia Ficci\xF3n"),e()(),t(64,"div",32),p(65,"i",39),t(66,"p",34),n(67,"Biograf\xEDa"),e()(),t(68,"div",32),p(69,"i",40),t(70,"p",34),n(71,"Autoayuda"),e()(),t(72,"div",32),p(73,"i",41),t(74,"p",34),n(75,"Hist\xF3rico"),e()(),t(76,"div",32),p(77,"i",42),t(78,"p",34),n(79,"Aventura"),e()(),t(80,"div",32),p(81,"i",43),t(82,"p",34),n(83,"Drama"),e()()()(),t(84,"div",20)(85,"h2",21),n(86,"Nuestra Espacios"),e()(),t(87,"div",22)(88,"div",23)(89,"div",44)(90,"div",45),p(91,"img",46),t(92,"div",47)(93,"h5",48),n(94,"Establecimiento"),e(),t(95,"p",49),n(96,"La Biblioteca Municipal de Ate cuenta con una amplia colecci\xF3n de libros, zona de lectura, acceso a internet, espacios para estudio y actividades culturales dirigidas a ni\xF1os, j\xF3venes y adultos. "),e()()()(),t(97,"div",44)(98,"div",45),p(99,"img",50),t(100,"div",47)(101,"h5",48),n(102,"Area de Estudio"),e(),t(103,"p",49),n(104,"El \xE1rea de estudio est\xE1 equipada con mesas individuales y grupales, iluminaci\xF3n adecuada, ambiente silencioso y conexi\xF3n Wi-Fi, ideal para la concentraci\xF3n, la investigaci\xF3n y el aprendizaje. "),e()()()(),t(105,"div",44)(106,"div",45),p(107,"img",51),t(108,"div",47)(109,"h5",48),n(110,"Area de actividades"),e(),t(111,"p",49),n(112,"El \xE1rea de actividades cuenta con un espacio amplio y multifuncional donde se realizan talleres, presentaciones de libros, cuentacuentos y eventos culturales dirigidos a todas las edades, fomentando la participaci\xF3n activa de la comunidad."),e()()()()()(),t(113,"div",20)(114,"h2",21),n(115,"Horarios de Atenci\xF3n"),e()(),t(116,"div",22)(117,"div",52)(118,"table",53)(119,"thead",54)(120,"tr")(121,"th"),n(122,"D\xEDa"),e(),t(123,"th"),n(124,"Horario de Ma\xF1ana"),e(),t(125,"th"),n(126,"Horario de Tarde"),e()()(),t(127,"tbody")(128,"tr")(129,"td"),n(130,"Lunes"),e(),t(131,"td"),n(132,"08:00 am \u2013 12:30 pm"),e(),t(133,"td"),n(134,"02:00 pm \u2013 05:00 pm"),e()(),t(135,"tr")(136,"td"),n(137,"Martes"),e(),t(138,"td"),n(139,"08:00 am \u2013 12:30 pm"),e(),t(140,"td"),n(141,"02:00 pm \u2013 05:00 pm"),e()(),t(142,"tr")(143,"td"),n(144,"Mi\xE9rcoles"),e(),t(145,"td"),n(146,"08:00 am \u2013 12:30 pm"),e(),t(147,"td"),n(148,"02:00 pm \u2013 05:00 pm"),e()(),t(149,"tr")(150,"td"),n(151,"Jueves"),e(),t(152,"td"),n(153,"08:00 am \u2013 12:30 pm"),e(),t(154,"td"),n(155,"02:00 pm \u2013 05:00 pm"),e()(),t(156,"tr")(157,"td"),n(158,"Viernes"),e(),t(159,"td"),n(160,"08:00 am \u2013 12:30 pm"),e(),t(161,"td"),n(162,"02:00 pm \u2013 05:00 pm"),e()(),t(163,"tr")(164,"td"),n(165,"S\xE1bado"),e(),t(166,"td"),n(167,"09:00 am \u2013 12:00 pm"),e(),t(168,"td"),n(169,"Cerrado"),e()(),t(170,"tr")(171,"td"),n(172,"Domingo"),e(),t(173,"td",55),n(174,"Cerrado"),e()()()()()(),t(175,"div",20)(176,"h2",21),n(177,"Donde nos Encontramos"),e()(),t(178,"div",22)(179,"div",23)(180,"div",56)(181,"div",57),p(182,"iframe",58),e()(),t(183,"div",27)(184,"div")(185,"h4",59),n(186,"Ubicaci\xF3n Exacta"),e(),t(187,"p",60)(188,"strong"),n(189,"Direcci\xF3n:"),e(),n(190," Carretera Central 7.5km Vitarte Ate, Lima, Peru"),e(),t(191,"p",60)(192,"strong"),n(193,"Referencia:"),e(),n(194," Frente a la Plaza Principal de Ate"),e(),t(195,"p",60)(196,"strong"),n(197,"Tel\xE9fono:"),e(),n(198," +51 987 654 321"),e()()()()(),t(199,"div",61)(200,"div",62)(201,"div",63)(202,"strong",64),n(203,"Registro exitoso"),e(),p(204,"button",65),e(),t(205,"div",66),n(206," \xA1Tu registro se complet\xF3 correctamente! Ahora puedes iniciar sesi\xF3n. "),e()()()())},styles:['@charset "UTF-8";.search-bar[_ngcontent-%COMP%]{max-width:800px;height:50px;margin:10px auto}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:20px;padding-left:15px}.custom-search-btn[_ngcontent-%COMP%]{background-color:#004080;color:#fff;border:none;border-radius:20px;padding:6px 16px;display:flex;align-items:center;justify-content:center}.custom-search-btn[_ngcontent-%COMP%]:hover{background-color:#d22670;color:#fff}.custom-carrusel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60vh;object-fit:cover;width:100%}.custom-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:#333;text-align:justify}.custom-card-img[_ngcontent-%COMP%]{height:250px;object-fit:cover;transition:transform .3s ease;border-bottom:2px solid #dee2e6}.card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease;border:none;border-radius:1rem}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 12px 24px #0003}.custom-text[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:500;color:#555;text-align:justify}@media (max-width: 768px){.custom-card-img[_ngcontent-%COMP%]{height:200px}.custom-text[_ngcontent-%COMP%]{font-size:1rem}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto}}']})};var Li=()=>({exact:!0}),Qe=class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=E({type:a,selectors:[["app-dashboard-navbar"]],decls:30,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","mb-2"],[1,"container-fluid"],["routerLink","/dashboard",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/dashboard/libros","routerLinkActive","active",1,"nav-link"],["routerLink","/dashboard/ejemplares","routerLinkActive","active",1,"nav-link"],["routerLink","/dashboard/usuarios","routerLinkActive","active",1,"nav-link"],["routerLink","/dashboard/reservas","routerLinkActive","active",1,"nav-link"],["routerLink","/dashboard/atrasadas","routerLinkActive","active",1,"nav-link"],["routerLink","/dashboard/historial","routerLinkActive","active",1,"nav-link"]],template:function(o,r){o&1&&(t(0,"nav",0)(1,"div",1)(2,"a",2),n(3,"Dashboard Biblioteca"),e(),t(4,"button",3),p(5,"span",4),e(),t(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),n(10,"Vista General"),e()(),t(11,"li",7)(12,"a",9),n(13,"Libros"),e()(),t(14,"li",7)(15,"a",10),n(16,"Ejemplares"),e()(),t(17,"li",7)(18,"a",11),n(19,"Usuarios"),e()(),t(20,"li",7)(21,"a",12),n(22,"Reservas Activas"),e()(),t(23,"li",7)(24,"a",13),n(25,"Devoluciones Atrasadas"),e()(),t(26,"li",7)(27,"a",14),n(28,"Historial"),e()()()()()(),p(29,"router-outlet")),o&2&&(l(9),c("routerLinkActiveOptions",Be(1,Li)))},dependencies:[me,oe,qt],encapsulation:2})};var Vi=()=>["/registrar"];function ji(a,i){if(a&1&&(t(0,"div",48),n(1),e()),a&2){let o=_();l(),b(" ",o.loginError," ")}}var Ye=class a{constructor(i,o,r){this.fb=i;this.http=o;this.router=r}loginForm;loginError=null;usuario=null;ngOnInit(){this.loginForm=this.fb.group({username:["",[L.required,L.email]],password:["",L.required]})}onLogin(){if(this.loginForm.invalid)return;let i={username:this.loginForm.value.username,password:this.loginForm.value.password};this.http.post("http://localhost:8080/api/auth/login",i,{withCredentials:!0}).subscribe({next:o=>{this.usuario=o,this.loginError=null,this.cerrarModal(),this.router.navigate(["/cuenta"],{state:{usuario:this.usuario}})},error:o=>{console.error("Error al iniciar sesi\xF3n:",o),this.loginError="Credenciales incorrectas o error de conexi\xF3n."}})}cerrarModal(){let i=document.getElementById("staticBackdrop");if(i){let o=bootstrap.Modal.getInstance(i);o&&o.hide()}}static \u0275fac=function(o){return new(o||a)(y(ye),y(q),y(he))};static \u0275cmp=E({type:a,selectors:[["app-principal-navbar"]],decls:68,vars:5,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","custom-navbar"],[1,"container-fluid","custom-container"],["routerLink","",1,"navbar-brand","custom-navbar-brand"],["src","https://www.muniate.gob.pe/wp-content/uploads/2022/01/logo-gdeis-01-1024x198.png","alt","Logo","width","30","height","24",1,"d-inline-block","align-text-top","custom-logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","custom-toggler"],[1,"navbar-toggler-icon","custom-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","custom-collapse"],[1,"navbar-nav","custom-nav-list"],[1,"nav-item","custom-nav-item"],["routerLink","",1,"nav-link","custom-nav-link"],["routerLink","catalogo",1,"nav-link","custom-nav-link"],["routerLink","eventos",1,"nav-link","custom-nav-link"],[1,"boton-login-container"],["type","button","data-bs-toggle","modal","data-bs-target","#loginModal",1,"btn","btn-primary","boton-login"],[1,"bi","bi-person-circle","icono-login"],["id","loginModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","loginModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","loginModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","email","id","username","formControlName","username","placeholder","usuario@correo.com","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Ingrese su contrase\xF1a","required","",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"text-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"routerLink"],[1,"navbar","navbar-expand-lg","custom-footer"],[1,"container"],[1,"row","w-100"],[1,"col-md-6","d-flex","flex-column","align-items-center","footer-columna-izquierda"],["src","https://www.muniate.gob.pe/wp-content/uploads/2021/01/linea-grafica-03.png","alt","Logo Municipalidad de Ate",1,"footer-logo","mb-2"],[1,"footer-texto","text-center"],[1,"col-md-6","d-flex","justify-content-md-end","align-items-center","footer-columna-derecha"],[1,"navbar-nav","footer-enlaces"],[1,"nav-item"],["href","tel:+51987654321",1,"nav-link","footer-link"],[1,"bi","bi-telephone-fill"],["href","mailto:contacto@municipalidadate.gob.pe",1,"nav-link","footer-link"],[1,"bi","bi-envelope-fill"],["href","https://goo.gl/maps/ate","target","_blank",1,"nav-link","footer-link"],[1,"bi","bi-geo-alt-fill"],[1,"alert","alert-danger","mt-2"]],template:function(o,r){o&1&&(t(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),p(4,"img",3),e(),t(5,"button",4),p(6,"span",5),e(),t(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),n(11,"Inicio"),e()(),t(12,"li",8)(13,"a",10),n(14,"Cat\xE1logo"),e()(),t(15,"li",8)(16,"a",11),n(17,"Eventos y Actividades"),e()()()()(),t(18,"div",12)(19,"button",13),p(20,"i",14),e()(),t(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",18)(25,"h1",19),n(26,"Iniciar sesi\xF3n"),e(),p(27,"button",20),e(),t(28,"div",21)(29,"form",22),S("ngSubmit",function(){return r.onLogin()}),t(30,"div",23)(31,"label",24),n(32,"Correo electr\xF3nico"),e(),p(33,"input",25),e(),t(34,"div",23)(35,"label",26),n(36,"Contrase\xF1a"),e(),p(37,"input",27),e(),m(38,ji,2,1,"div",28),t(39,"div",29)(40,"button",30),n(41,"Ingresar"),e()()()(),t(42,"div",31)(43,"a",32),n(44,"Registrar"),e()()()()()()(),p(45,"router-outlet"),t(46,"footer")(47,"nav",33)(48,"div",34)(49,"div",35)(50,"div",36),p(51,"img",37),t(52,"span",38),n(53," \xA9 Todos los derechos reservados a la Municipalidad de Ate "),e()(),t(54,"div",39)(55,"ul",40)(56,"li",41)(57,"a",42),p(58,"i",43),n(59," Tel\xE9fono: +51 987 654 321 "),e()(),t(60,"li",41)(61,"a",44),p(62,"i",45),n(63," contactomunicipalidadate.gob.pe "),e()(),t(64,"li",41)(65,"a",46),p(66,"i",47),n(67," Av. Principal 123, Ate, Lima "),e()()()()()()()()),o&2&&(l(29),c("formGroup",r.loginForm),l(9),c("ngIf",r.loginError),l(2),c("disabled",r.loginForm.invalid),l(3),c("routerLink",Be(4,Vi)))},dependencies:[Ue,me,oe,ae,te,J,Q,ee,re,fe,ge,M,B],styles:['@charset "UTF-8";.custom-navbar[_ngcontent-%COMP%]{background-color:#004080;padding:.5rem 1rem;box-shadow:0 10px 6px #0000001a}.custom-container[_ngcontent-%COMP%]{max-width:1200px;padding:10px}.custom-logo[_ngcontent-%COMP%]{width:300px;height:auto;transition:transform .3s ease}.custom-logo[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.custom-nav-list[_ngcontent-%COMP%]{display:flex;gap:2rem;align-items:center}.custom-nav-link[_ngcontent-%COMP%]{color:#036;font-weight:700;font-size:1.4rem;letter-spacing:1px;transition:all .3s ease}.custom-nav-link[_ngcontent-%COMP%]:hover, .custom-nav-link.active[_ngcontent-%COMP%]{color:#d22670;transform:scale(1.05)}.boton-login[_ngcontent-%COMP%]{background-color:#036;border:none;padding:8px 12px;border-radius:50px;width:60px;height:60px;transition:background-color .3s ease}.boton-login[_ngcontent-%COMP%]:hover{background-color:#059}.icono-login[_ngcontent-%COMP%]{font-size:2rem;color:#fff}.boton-login-container[_ngcontent-%COMP%]{margin-left:auto}@media (max-width: 992px){.custom-nav-list[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem 0}.custom-nav-link[_ngcontent-%COMP%]{font-size:1.1rem}.custom-logo[_ngcontent-%COMP%]{width:220px}.boton-login-container[_ngcontent-%COMP%]{margin:1rem auto;display:flex;justify-content:center;align-items:center;width:100%;order:-1}.custom-collapse[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}}.custom-footer[_ngcontent-%COMP%]{background-color:#036;padding:20px 0;border-top:1px solid #000000}.footer-logo[_ngcontent-%COMP%]{max-width:150px;height:auto}.footer-texto[_ngcontent-%COMP%]{color:#fff;font-size:.95rem}.footer-enlaces[_ngcontent-%COMP%]{display:flex;flex-direction:column;list-style:none;padding-left:0;margin:0}.footer-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:flex;align-items:center;gap:.5rem;padding:.3rem 0;font-size:.95rem}.footer-link[_ngcontent-%COMP%]:hover{color:#d22670}.footer-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 768px){.footer-texto[_ngcontent-%COMP%]{font-size:.9rem}.footer-link[_ngcontent-%COMP%]{justify-content:center}.footer-enlaces[_ngcontent-%COMP%]{align-items:center}.footer-logo[_ngcontent-%COMP%]{max-width:130px}}']})};var ti=a=>["/detalle",a];function Gi(a,i){if(a&1&&(t(0,"option",19),n(1),e()),a&2){let o=i.$implicit;c("value",o),l(),h(o)}}function Ui(a,i){if(a&1&&(t(0,"option",19),n(1),e()),a&2){let o=i.$implicit;c("value",o),l(),h(o)}}function Hi(a,i){a&1&&(t(0,"div",33),n(1," No disponible "),e())}function $i(a,i){if(a&1&&(t(0,"div",20)(1,"div",21)(2,"div",22),p(3,"img",23),m(4,Hi,2,0,"div",24),e(),t(5,"span",25),n(6),e(),t(7,"div",26)(8,"h5",27),n(9),e(),t(10,"p",28),n(11),e(),t(12,"p",28)(13,"strong"),n(14,"Ejemplares disponibles:"),e(),n(15),e(),t(16,"div",29)(17,"button",30),p(18,"i",31),n(19," Ver m\xE1s "),e(),t(20,"a",32),n(21,"Reservar"),e()()()()()),a&2){let o=i.$implicit,r=i.index;l(3),c("src",o.imagenUrl,pe)("alt",o.titulo),l(),c("ngIf",o.disponibles===0),l(2),h(o.genero),l(3),h(o.titulo),l(2),h(o.descripcion),l(4),b(" ",o.disponibles," "),l(2),ke("data-bs-target","#modalLibro"+r),l(3),c("routerLink",Le(9,ti,o.id))}}function Wi(a,i){if(a&1&&(vt(0),t(1,"div",34)(2,"div",35)(3,"div",36)(4,"div",37)(5,"h5",38),n(6),e(),p(7,"button",39),e(),t(8,"div",40)(9,"div",41)(10,"div",42),p(11,"img",23),e(),t(12,"div",42)(13,"h5"),n(14),e(),t(15,"p")(16,"strong"),n(17,"Autor:"),e(),n(18),e(),t(19,"p")(20,"strong"),n(21,"Editorial:"),e(),n(22),e(),t(23,"p")(24,"strong"),n(25,"Descripci\xF3n:"),e()(),t(26,"p"),n(27),e()()()(),t(28,"div",43)(29,"button",44),n(30,"Cerrar"),e(),t(31,"a",32),n(32,"Reservar"),e()()()()(),bt()),a&2){let o=i.$implicit,r=i.index;l(),c("id","modalLibro"+r),l(5),b("Detalles de ",o.titulo),l(5),c("src",o.imagenUrl,pe)("alt",o.titulo),l(3),h(o.titulo),l(4),b(" ",o.autor),l(4),b(" ",o.editorial),l(5),h(o.descripcion),l(4),c("routerLink",Le(9,ti,o.id))}}var Ke=class a{constructor(i,o){this.fb=i;this.librosService=o}libros=[];editoriales=[];generos=[];filtroForm;ngOnInit(){this.filtroForm=this.fb.group({titulo:[""],editorial:[""],genero:[""],orden:["asc"]}),this.cargarFiltros(),this.cargarLibros()}cargarFiltros(){this.librosService.getEditoriales().subscribe({next:i=>this.editoriales=i,error:i=>console.error("Error cargando editoriales",i)}),this.librosService.getGeneros().subscribe({next:i=>this.generos=i,error:i=>console.error("Error cargando g\xE9neros",i)})}cargarLibros(){this.librosService.getLibros().subscribe({next:i=>{this.libros=this.agregarDisponibles(i)},error:i=>console.error("Error cargando libros",i)})}agregarDisponibles(i){return i.map(o=>de(Y({},o),{disponibles:o.ejemplares.filter(r=>r.estado==="DISPONIBLE").length}))}filtrar(){let{titulo:i,editorial:o,genero:r,orden:s}=this.filtroForm.value;this.librosService.getLibros().subscribe({next:d=>{this.libros=d.filter(u=>!i||u.titulo.toLowerCase().includes(i.toLowerCase())).filter(u=>!o||u.editorial===o).filter(u=>!r||u.genero===r).sort((u,f)=>{let R=u.titulo.localeCompare(f.titulo,"es",{sensitivity:"base"});return s==="desc"?-R:R})},error:d=>console.error("Error al filtrar libros",d)})}static \u0275fac=function(o){return new(o||a)(y(ye),y(De))};static \u0275cmp=E({type:a,selectors:[["app-catalogo"]],decls:30,vars:5,consts:[[1,"container","mt-5","text-center"],[1,"mb-4"],[1,"row","g-3","justify-content-center",3,"ngSubmit","formGroup"],[1,"col-md-3"],["type","text","formControlName","titulo","placeholder","Buscar por t\xEDtulo...",1,"form-control"],[1,"col-md-2"],["formControlName","editorial",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","genero",1,"form-select"],["formControlName","orden",1,"form-select"],["value","asc"],["value","desc"],["type","submit",1,"btn","btn-primary","w-100"],[1,"bi","bi-search"],[1,"container","my-5"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"col"],[1,"card","h-100","position-relative"],[1,"position-relative"],[1,"card-img-top","libro-img",3,"src","alt"],["class","position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-75 d-flex align-items-center justify-content-center text-white fw-bold fs-6",4,"ngIf"],[1,"btn","btn-info"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"card-text"],[1,"mt-auto","d-flex","justify-content-between"],["data-bs-toggle","modal",1,"btn","btn-outline-primary","btn-sm"],[1,"bi","bi-eye-fill"],[1,"btn","btn-primary","btn-sm",3,"routerLink"],[1,"position-absolute","top-0","start-0","w-100","h-100","bg-dark","bg-opacity-75","d-flex","align-items-center","justify-content-center","text-white","fw-bold","fs-6"],["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"h2",1),n(2,"Cat\xE1logo de Libros"),e()(),t(3,"form",2),S("ngSubmit",function(){return r.filtrar()}),t(4,"div",3),p(5,"input",4),e(),t(6,"div",5)(7,"select",6)(8,"option",7),n(9,"Todas las editoriales"),e(),m(10,Gi,2,2,"option",8),e()(),t(11,"div",5)(12,"select",9)(13,"option",7),n(14,"Todos los g\xE9neros"),e(),m(15,Ui,2,2,"option",8),e()(),t(16,"div",5)(17,"select",10)(18,"option",11),n(19,"A-Z"),e(),t(20,"option",12),n(21,"Z-A"),e()()(),t(22,"div",5)(23,"button",13),p(24,"i",14),n(25," Filtrar "),e()()(),t(26,"div",15)(27,"div",16),m(28,$i,22,11,"div",17)(29,Wi,33,11,"ng-container",18),e()()),o&2&&(l(3),c("formGroup",r.filtroForm),l(7),c("ngForOf",r.editoriales),l(5),c("ngForOf",r.generos),l(13),c("ngForOf",r.libros),l(),c("ngForOf",r.libros))},dependencies:[M,k,B,ae,te,be,Ee,J,ve,Q,ee,fe,ge,Ge,oe],styles:['@charset "UTF-8";.custom-card-img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:500px;object-fit:cover;transition:transform .3s ease}.card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.03);box-shadow:0 10px 20px #0003}.libro-img[_ngcontent-%COMP%]{height:300px;object-fit:contain;background-color:#f8f9fa}@media (max-width: 576px){.custom-card-img[_ngcontent-%COMP%]{height:200px}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto}}']})};function zi(a,i){if(a&1&&(t(0,"div",21)(1,"div",22),p(2,"img",23),t(3,"div",24)(4,"h5",25),n(5),e(),t(6,"p",26),n(7),e()(),t(8,"div",27),p(9,"i",28),n(10),e()()()),a&2){let o=i.$implicit;l(2),c("src",o.imagen,pe)("alt",o.titulo),l(3),h(o.titulo),l(2),h(o.descripcion),l(3),b(" ",o.horario," ")}}function qi(a,i){if(a&1&&p(0,"div",32),a&2){let o=_().$implicit;c("title",Ht(o.events.join(", ")))}}function Ji(a,i){if(a&1&&(t(0,"div",29)(1,"div",30),n(2),e(),m(3,qi,1,2,"div",31),e()),a&2){let o=i.$implicit,r=_();xe("today",o.day===r.currentDate.getDate()&&r.calendarTitle.includes(r.monthNames[r.currentDate.getMonth()])),l(2),h(o.day),l(),c("ngIf",o.events.length>0)}}var Ze=class a{eventosEspeciales=[{titulo:"\u{1F4DA} Feria del Libro Municipal 2025",descripcion:"Una semana llena de cultura, libros, autores invitados, actividades para ni\xF1os y m\xE1s. \xA1No te la pierdas!",fecha:"Del 12 al 19 de julio \xB7 Parque Central de Ate",imagen:"https://i.imgur.com/enCfrd9.jpeg"}];eventos=[{titulo:"Club de Lectura Juvenil",descripcion:"Espacio para compartir libros e ideas con j\xF3venes lectores apasionados.",horario:"Jueves - 4:00 p.m.",imagen:"https://i.imgur.com/HNjZHxj.jpeg"},{titulo:"Taller de Escritura Creativa",descripcion:"Aprende a narrar tus propias historias con t\xE9cnicas literarias modernas.",horario:"S\xE1bados - 10:00 a.m.",imagen:"https://i.imgur.com/6L1Pbr8.png"},{titulo:"Cuentacuentos en Familia",descripcion:"Tardes m\xE1gicas de cuentos interactivos y actividades para los m\xE1s peque\xF1os.",horario:"Domingos - 3:00 p.m.",imagen:"https://i.imgur.com/F4svXlJ.png"},{titulo:"Taller de Ilustraci\xF3n Infantil",descripcion:"Clases de dibujo para ni\xF1os de 6 a 12 a\xF1os. Desarrolla su creatividad con arte y color.",horario:"Viernes - 3:00 p.m.",imagen:"https://images.unsplash.com/photo-1573164713988-8665fc963095"},{titulo:"Cine Comunitario",descripcion:"Proyecciones gratuitas de cine peruano y latinoamericano al aire libre.",horario:"S\xE1bados - 6:30 p.m.",imagen:"https://i.imgur.com/FjwrSiQ.jpeg"},{titulo:"Charlas de Historia Local",descripcion:"Descubre el pasado de Ate con relatos y exposiciones.",horario:"Mi\xE9rcoles - 5:00 p.m.",imagen:"https://images.unsplash.com/photo-1531297484001-80022131f5a1"},{titulo:"Taller de Teatro Juvenil",descripcion:"Actuaci\xF3n, expresi\xF3n corporal y montaje de obras.",horario:"Martes y jueves - 4:00 p.m.",imagen:"https://images.unsplash.com/photo-1596495577886-d920f1fb7238"},{titulo:"Club de Ajedrez",descripcion:"Re\xFAne a principiantes y expertos para aprender, practicar y competir.",horario:"Domingos - 10:00 a.m.",imagen:"https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c"},{titulo:"Encuentro de Poetas",descripcion:"Lecturas en vivo, micro abierto y presentaci\xF3n de libros.",horario:"Una vez al mes - 7:00 p.m.",imagen:"https://images.unsplash.com/photo-1515378791036-0648a3ef77b2"}];calendarioEventos={"2025-04-10":["Club de Lectura Juvenil"],"2025-04-13":["Cuentacuentos en Familia"],"2025-04-20":["Taller de Escritura Creativa"],"2025-07-12":["Feria del Libro - Inicio"],"2025-07-19":["Feria del Libro - Clausura"]};currentDate=new Date;calendarTitle="";days=[];ngOnInit(){this.renderCalendar()}monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];renderCalendar(){let i=this.currentDate.getFullYear(),o=this.currentDate.getMonth(),r=new Date,s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];this.calendarTitle=`${s[o]} ${i}`;let d=new Date(i,o,1).getDay(),u=new Date(i,o+1,0).getDate();this.days=[],this.days.push(...["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"].map(f=>({day:f,events:[]})));for(let f=0;f<d;f++)this.days.push({day:"",events:[]});for(let f=1;f<=u;f++){let R=`${i}-${String(o+1).padStart(2,"0")}-${String(f).padStart(2,"0")}`,x=this.calendarioEventos[R]||[];this.days.push({day:f,events:x})}}prevMonth(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.renderCalendar()}nextMonth(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.renderCalendar()}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=E({type:a,selectors:[["app-eventos"]],decls:30,vars:7,consts:[[1,"container","mt-5","mb-4"],[1,"fw-bold","text-primary","text-center","custom-titulo","pb-2"],[1,"text-center","text-muted","fs-5"],[1,"container","mb-5"],[1,"row","destacado","align-items-center","p-4","shadow"],[1,"col-md-8"],[1,"fw-bold"],[1,"mb-0"],[1,"bi","bi-calendar-event"],[1,"col-md-4","text-end","d-none","d-md-block"],["alt","Evento Especial",1,"img-fluid","rounded-3",3,"src"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"container","calendar-container","mb-5"],[1,"calendar-header","mb-3","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-chevron-left"],[1,"fw-bold","text-center","mb-0"],[1,"bi","bi-chevron-right"],[1,"calendar-grid"],["class","calendar-cell",3,"today",4,"ngFor","ngForOf"],[1,"col"],[1,"card","evento-card","shadow-sm","h-100","rounded-4"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title","text-primary","fw-bold"],[1,"card-text"],[1,"card-footer","bg-light","text-muted","text-center"],[1,"bi","bi-clock"],[1,"calendar-cell"],[1,"calendar-day"],["class","event-bullet",3,"title",4,"ngIf"],[1,"event-bullet",3,"title"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"h2",1),n(2,"Eventos y Actividades Culturales"),e(),t(3,"p",2),n(4,"Participa en nuestras iniciativas educativas, art\xEDsticas y recreativas."),e()(),t(5,"div",3)(6,"div",4)(7,"div",5)(8,"h4",6),n(9),e(),t(10,"p"),n(11),e(),t(12,"p",7),p(13,"i",8),n(14),e()(),t(15,"div",9),p(16,"img",10),e()()(),t(17,"div",3)(18,"div",11),m(19,zi,11,5,"div",12),e()(),t(20,"div",13)(21,"div",14)(22,"button",15),S("click",function(){return r.prevMonth()}),p(23,"i",16),e(),t(24,"h4",17),n(25),e(),t(26,"button",15),S("click",function(){return r.nextMonth()}),p(27,"i",18),e()(),t(28,"div",19),m(29,Ji,4,4,"div",20),e()()),o&2&&(l(9),h(r.eventosEspeciales[0].titulo),l(2),h(r.eventosEspeciales[0].descripcion),l(3),b(" ",r.eventosEspeciales[0].fecha),l(2),c("src",r.eventosEspeciales[0].imagen,pe),l(3),c("ngForOf",r.eventos),l(6),h(r.calendarTitle),l(4),c("ngForOf",r.days))},dependencies:[M,k,B],styles:["body[_ngcontent-%COMP%]{background-color:#f8f9fa}.evento-card[_ngcontent-%COMP%]:hover{transform:scale(1.02);transition:transform .3s ease}.evento-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:220px;object-fit:cover}.destacado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#0d6efd,#6610f2);color:#fff;border-radius:1rem;overflow:hidden}.custom-titulo[_ngcontent-%COMP%]{border-bottom:4px solid #0d6efd}.calendar-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:15px;box-shadow:0 0 30px #0000000d}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;text-align:center}.calendar-day[_ngcontent-%COMP%]{font-weight:700;color:#0d6efd}.calendar-cell[_ngcontent-%COMP%]{height:80px;border-radius:10px;background-color:#e9ecef;padding:5px;position:relative}.calendar-cell.today[_ngcontent-%COMP%]{background-color:#cfe2ff;border:2px solid #0d6efd}.calendar-cell[_ngcontent-%COMP%]   .event-bullet[_ngcontent-%COMP%]{width:6px;height:6px;background-color:#0d6efd;border-radius:50%;position:absolute;bottom:5px;left:50%;transform:translate(-50%)}"]})};function Qi(a,i){if(a&1&&(t(0,"div",34),n(1),e()),a&2){let o=_();l(),h(o.error)}}function Yi(a,i){a&1&&(t(0,"div"),n(1,"El DNI es requerido"),e())}function Ki(a,i){a&1&&(t(0,"div"),n(1,"El DNI debe tener 8 d\xEDgitos"),e())}function Zi(a,i){if(a&1&&(t(0,"div",35),m(1,Yi,2,0,"div",36)(2,Ki,2,0,"div",36),e()),a&2){let o,r,s=_();l(),c("ngIf",(o=s.registroForm.get("dni"))==null||o.errors==null?null:o.errors.required),l(),c("ngIf",(r=s.registroForm.get("dni"))==null||r.errors==null?null:r.errors.pattern)}}function Xi(a,i){a&1&&(t(0,"div",35),n(1," Los nombres son requeridos "),e())}function en(a,i){a&1&&(t(0,"div",35),n(1," Los apellidos son requeridos "),e())}function tn(a,i){a&1&&(t(0,"div",35),n(1," La fecha de nacimiento es requerida "),e())}function nn(a,i){a&1&&(t(0,"div",35),n(1," El g\xE9nero es requerido "),e())}function on(a,i){a&1&&(t(0,"div"),n(1,"El correo es requerido"),e())}function rn(a,i){a&1&&(t(0,"div"),n(1,"Formato de correo inv\xE1lido"),e())}function an(a,i){if(a&1&&(t(0,"div",35),m(1,on,2,0,"div",36)(2,rn,2,0,"div",36),e()),a&2){let o,r,s=_();l(),c("ngIf",(o=s.registroForm.get("username"))==null||o.errors==null?null:o.errors.required),l(),c("ngIf",(r=s.registroForm.get("username"))==null||r.errors==null?null:r.errors.email)}}function sn(a,i){a&1&&(t(0,"div"),n(1,"El tel\xE9fono es requerido"),e())}function ln(a,i){a&1&&(t(0,"div"),n(1,"El tel\xE9fono debe tener 9 d\xEDgitos"),e())}function dn(a,i){if(a&1&&(t(0,"div",35),m(1,sn,2,0,"div",36)(2,ln,2,0,"div",36),e()),a&2){let o,r,s=_();l(),c("ngIf",(o=s.registroForm.get("telefono"))==null||o.errors==null?null:o.errors.required),l(),c("ngIf",(r=s.registroForm.get("telefono"))==null||r.errors==null?null:r.errors.pattern)}}function cn(a,i){a&1&&(t(0,"div",35),n(1," La direcci\xF3n es requerida "),e())}function un(a,i){a&1&&(t(0,"div"),n(1,"La contrase\xF1a es requerida"),e())}function pn(a,i){a&1&&(t(0,"div"),n(1,"M\xEDnimo 6 caracteres"),e())}function mn(a,i){if(a&1&&(t(0,"div",35),m(1,un,2,0,"div",36)(2,pn,2,0,"div",36),e()),a&2){let o,r,s=_();l(),c("ngIf",(o=s.registroForm.get("password"))==null||o.errors==null?null:o.errors.required),l(),c("ngIf",(r=s.registroForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}var Xe=class a{constructor(i,o,r){this.fb=i;this.http=o;this.router=r;this.registroForm=this.fb.group({dni:["",L.required],nombres:["",L.required],apellidos:["",L.required],fechaNacimiento:["",L.required],genero:["",L.required],username:["",[L.required,L.email]],telefono:["",L.required],direccion:["",L.required],password:["",[L.required,L.minLength(6)]]})}registroForm;error=null;onSubmit(){if(this.registroForm.invalid){this.error="Completa todos los campos correctamente";return}this.http.post("http://localhost:8080/api/auth/registrar",this.registroForm.value,{responseType:"text"}).subscribe({next:()=>this.router.navigate(["/cuenta"]),error:i=>{console.error("Error del servidor:",i),i.error&&typeof i.error=="string"?this.error=i.error:i.status===0?this.error="No se pudo conectar con el servidor":this.error="Error al registrar. Intenta m\xE1s tarde."}})}static \u0275fac=function(o){return new(o||a)(y(ye),y(q),y(he))};static \u0275cmp=E({type:a,selectors:[["app-registrar"]],decls:64,vars:12,consts:[[1,"form-container","container","mt-5"],[1,"mb-4","text-center"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni","required","","pattern","[0-9]{8}",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"row","g-3"],[1,"col-md-6"],["for","nombres",1,"form-label"],["type","text","id","nombres","formControlName","nombres","required","",1,"form-control"],["for","apellidos",1,"form-label"],["type","text","id","apellidos","formControlName","apellidos","required","",1,"form-control"],[1,"row","g-3","mt-3"],["for","fechaNacimiento",1,"form-label"],["type","date","id","fechaNacimiento","formControlName","fechaNacimiento","required","",1,"form-control"],["for","genero",1,"form-label"],["id","genero","formControlName","genero","required","",1,"form-select"],["value",""],["value","masculino"],["value","femenino"],["value","otro"],["for","username",1,"form-label"],["type","email","id","username","formControlName","username","required","",1,"form-control"],["for","telefono",1,"form-label"],["type","tel","id","telefono","formControlName","telefono","required","","pattern","[0-9]{9}",1,"form-control"],[1,"mb-3","mt-3"],["for","direccion",1,"form-label"],["type","text","id","direccion","formControlName","direccion","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","required","","minlength","6",1,"form-control"],[1,"text-center","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"],[1,"text-danger"],[4,"ngIf"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"h2",1),n(2,"Registro de Usuario - Biblioteca Nacional"),e(),m(3,Qi,2,1,"div",2),t(4,"form",3),S("ngSubmit",function(){return r.onSubmit()}),t(5,"div",4)(6,"label",5),n(7,"DNI *"),e(),p(8,"input",6),m(9,Zi,3,2,"div",7),e(),t(10,"div",8)(11,"div",9)(12,"label",10),n(13,"Nombres *"),e(),p(14,"input",11),m(15,Xi,2,0,"div",7),e(),t(16,"div",9)(17,"label",12),n(18,"Apellidos *"),e(),p(19,"input",13),m(20,en,2,0,"div",7),e()(),t(21,"div",14)(22,"div",9)(23,"label",15),n(24,"Fecha de nacimiento *"),e(),p(25,"input",16),m(26,tn,2,0,"div",7),e(),t(27,"div",9)(28,"label",17),n(29,"G\xE9nero *"),e(),t(30,"select",18)(31,"option",19),n(32,"Seleccione"),e(),t(33,"option",20),n(34,"Masculino"),e(),t(35,"option",21),n(36,"Femenino"),e(),t(37,"option",22),n(38,"Otro"),e()(),m(39,nn,2,0,"div",7),e()(),t(40,"div",14)(41,"div",9)(42,"label",23),n(43,"Correo electr\xF3nico *"),e(),p(44,"input",24),m(45,an,3,2,"div",7),e(),t(46,"div",9)(47,"label",25),n(48,"Tel\xE9fono *"),e(),p(49,"input",26),m(50,dn,3,2,"div",7),e()(),t(51,"div",27)(52,"label",28),n(53,"Direcci\xF3n *"),e(),p(54,"input",29),m(55,cn,2,0,"div",7),e(),t(56,"div",27)(57,"label",30),n(58,"Contrase\xF1a *"),e(),p(59,"input",31),m(60,mn,3,2,"div",7),e(),t(61,"div",32)(62,"button",33),n(63,"Registrarse"),e()()()()),o&2){let s,d,u,f,R,x,F,I,G;l(3),c("ngIf",r.error),l(),c("formGroup",r.registroForm),l(5),c("ngIf",((s=r.registroForm.get("dni"))==null?null:s.invalid)&&((s=r.registroForm.get("dni"))==null?null:s.touched)),l(6),c("ngIf",((d=r.registroForm.get("nombres"))==null?null:d.invalid)&&((d=r.registroForm.get("nombres"))==null?null:d.touched)),l(5),c("ngIf",((u=r.registroForm.get("apellidos"))==null?null:u.invalid)&&((u=r.registroForm.get("apellidos"))==null?null:u.touched)),l(6),c("ngIf",((f=r.registroForm.get("fechaNacimiento"))==null?null:f.invalid)&&((f=r.registroForm.get("fechaNacimiento"))==null?null:f.touched)),l(13),c("ngIf",((R=r.registroForm.get("genero"))==null?null:R.invalid)&&((R=r.registroForm.get("genero"))==null?null:R.touched)),l(6),c("ngIf",((x=r.registroForm.get("username"))==null?null:x.invalid)&&((x=r.registroForm.get("username"))==null?null:x.touched)),l(5),c("ngIf",((F=r.registroForm.get("telefono"))==null?null:F.invalid)&&((F=r.registroForm.get("telefono"))==null?null:F.touched)),l(5),c("ngIf",((I=r.registroForm.get("direccion"))==null?null:I.invalid)&&((I=r.registroForm.get("direccion"))==null?null:I.touched)),l(5),c("ngIf",((G=r.registroForm.get("password"))==null?null:G.invalid)&&((G=r.registroForm.get("password"))==null?null:G.touched)),l(2),c("disabled",!r.registroForm.valid)}},dependencies:[M,B,ae,te,be,Ee,J,ve,Q,ee,re,Qt,$e,fe,ge,Ge],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 12px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.btn-registro[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:14px 30px;font-size:1.2rem;font-weight:700;border:none;border-radius:8px;transition:background-color .3s ease}.btn-registro[_ngcontent-%COMP%]:hover{background-color:#218838}']})};function hn(a,i){if(a&1&&(t(0,"div",22)(1,"h6"),n(2),e(),t(3,"small"),n(4),e(),p(5,"br"),t(6,"small"),n(7),T(8,"date"),e()()),a&2){let o=i.$implicit;l(2),b("\u{1F4D8} ",o.ejemplar.libro.titulo),l(2),b("Autor: ",o.ejemplar.libro.autor),l(3),b("Fecha de reserva: ",N(8,3,o.fechaReserva,"dd MMMM yyyy"))}}function _n(a,i){if(a&1&&(t(0,"div"),m(1,hn,9,6,"div",21),e()),a&2){let o=_(2);l(),c("ngForOf",o.reservas)}}function fn(a,i){a&1&&(t(0,"p"),n(1,"No tienes libros reservados."),e())}function gn(a,i){if(a&1&&(t(0,"div")(1,"div",18)(2,"div",19)(3,"p")(4,"strong"),n(5,"DNI:"),e(),n(6),e(),t(7,"p")(8,"strong"),n(9,"Correo:"),e(),n(10),e(),t(11,"p")(12,"strong"),n(13,"Tel\xE9fono:"),e(),n(14),e(),t(15,"p")(16,"strong"),n(17,"Nombres:"),e(),n(18),e(),t(19,"p")(20,"strong"),n(21,"Apellidos:"),e(),n(22),e(),t(23,"p")(24,"strong"),n(25,"Fecha de nacimiento:"),e(),n(26),T(27,"date"),e(),t(28,"p")(29,"strong"),n(30,"Direcci\xF3n:"),e(),n(31),e()()(),t(32,"div",20)(33,"h4",15),n(34,"Libros Reservados"),e(),m(35,_n,2,1,"div",16)(36,fn,2,0,"ng-template",null,1,z),e()()),a&2){let o=D(37),r=_();l(6),b(" ",r.usuario.dni),l(4),b(" ",r.usuario.username),l(4),b(" ",r.usuario.telefono),l(4),b(" ",r.usuario.nombres),l(4),b(" ",r.usuario.apellidos),l(4),b(" ",Et(27,9,r.usuario.fechaNacimiento)),l(5),b(" ",r.usuario.direccion),l(4),c("ngIf",r.reservas.length>0)("ngIfElse",o)}}function vn(a,i){a&1&&(t(0,"p"),n(1,"Cargando informaci\xF3n..."),e())}function bn(a,i){if(a&1&&(t(0,"div",23),n(1),e()),a&2){let o=_();l(),h(o.error)}}var et=class a{constructor(i,o){this.http=i;this.router=o}usuario=null;reservas=[];error=null;ngOnInit(){let i=history.state?.usuario;i?(this.usuario=i,this.reservas=i.reservas||[]):this.http.get("http://localhost:8080/api/tucuenta",{withCredentials:!0}).subscribe({next:o=>{this.usuario=o.usuario,this.reservas=o.reservas||[]},error:o=>{console.error(o),this.error="No se pudo obtener la informaci\xF3n del usuario."}})}static \u0275fac=function(o){return new(o||a)(y(q),y(he))};static \u0275cmp=E({type:a,selectors:[["app-cuenta"]],decls:25,vars:3,consts:[["cargando",""],["noReservas",""],[1,"container-fluid"],[1,"row"],[1,"col-md-3","col-lg-2","p-3","sidebar"],[1,"text-primary","mb-4"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/cuenta",1,"nav-link","active"],[1,"bi","bi-person-fill","me-2"],["routerLink","/mis-reservas",1,"nav-link"],[1,"bi","bi-calendar3","me-2"],["routerLink","/",1,"nav-link"],[1,"bi","bi-box-arrow-left","me-2"],[1,"col-md-9","col-lg-10","profile-section"],[1,"text-primary","fw-bold"],[4,"ngIf","ngIfElse"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-6"],[1,"reserved-books","mt-4"],["class","book-item mt-2",4,"ngFor","ngForOf"],[1,"book-item","mt-2"],[1,"alert","alert-danger","mt-3"]],template:function(o,r){if(o&1&&(t(0,"div",2)(1,"div",3)(2,"div",4)(3,"h4",5),n(4,"Mi Cuenta"),e(),t(5,"ul",6)(6,"li",7)(7,"a",8),p(8,"i",9),n(9,"Yo"),e()(),t(10,"li",7)(11,"a",10),p(12,"i",11),n(13,"Mis Pr\xE9stamos"),e()(),t(14,"li",7)(15,"a",12),p(16,"i",13),n(17,"Cerrar Sesi\xF3n"),e()()()(),t(18,"div",14)(19,"h2",15),n(20,"Mi Informaci\xF3n"),e(),m(21,gn,38,11,"div",16)(22,vn,2,0,"ng-template",null,0,z)(24,bn,2,1,"div",17),e()()()),o&2){let s=D(23);l(21),c("ngIf",r.usuario)("ngIfElse",s),l(3),c("ngIf",r.error)}},dependencies:[Ue,oe,ae,M,k,B,U],styles:["body[_ngcontent-%COMP%]{background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{background-color:#fff;height:100%;border-right:1px solid #ddd}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-radius:8px}.profile-section[_ngcontent-%COMP%]{padding:30px}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem}.data-label[_ngcontent-%COMP%]{font-weight:600;color:#007bff}.reserved-books[_ngcontent-%COMP%]{margin-top:40px}.book-item[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;padding:15px;margin-bottom:15px}.book-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700}.book-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d}"]})};var tt=class a{static \u0275fac=function(o){return new(o||a)};static \u0275cmp=E({type:a,selectors:[["app-mis-reservas"]],decls:64,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-3","col-lg-2","p-3","sidebar"],[1,"text-primary","mb-4"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link"],[1,"bi","bi-person-fill","me-2"],[1,"nav-link","active"],[1,"bi","bi-calendar3","me-2"],["href","#",1,"nav-link"],[1,"bi","bi-box-arrow-left","me-2"],[1,"col-md-9","col-lg-10","content-section"],[1,"text-primary","fw-bold","mb-4"],[1,"row","g-4"],[1,"col-md-6","col-lg-4"],[1,"card","h-100","p-3"],[1,"card-title"],[1,"card-subtitle","mb-2"],[1,"card-text","mb-1"],[1,"card-text"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),n(4,"Mi Cuenta"),e(),t(5,"ul",4)(6,"li",5)(7,"a",6),p(8,"i",7),n(9,"Yo"),e()(),t(10,"li",5)(11,"a",8),p(12,"i",9),n(13,"Mis Pr\xE9stamos"),e()(),t(14,"li",5)(15,"a",10),p(16,"i",11),n(17,"Cerrar Sesi\xF3n"),e()()()(),t(18,"div",12)(19,"h2",13),n(20,"Mis Pr\xE9stamos"),e(),t(21,"div",14)(22,"div",15)(23,"div",16)(24,"h5",17),n(25,"\u{1F4D5} Don Quijote de la Mancha"),e(),t(26,"h6",18),n(27,"Miguel de Cervantes"),e(),t(28,"p",19)(29,"strong"),n(30,"Fecha de pr\xE9stamo:"),e(),n(31," 5 abril 2025"),e(),t(32,"p",20)(33,"strong"),n(34,"Fecha de devoluci\xF3n:"),e(),n(35," 20 abril 2025"),e()()(),t(36,"div",15)(37,"div",16)(38,"h5",17),n(39,"\u{1F4D8} Rayuela"),e(),t(40,"h6",18),n(41,"Julio Cort\xE1zar"),e(),t(42,"p",19)(43,"strong"),n(44,"Fecha de pr\xE9stamo:"),e(),n(45," 8 abril 2025"),e(),t(46,"p",20)(47,"strong"),n(48,"Fecha de devoluci\xF3n:"),e(),n(49," 23 abril 2025"),e()()(),t(50,"div",15)(51,"div",16)(52,"h5",17),n(53,"\u{1F4D7} El Amor en los Tiempos del C\xF3lera"),e(),t(54,"h6",18),n(55,"Gabriel Garc\xEDa M\xE1rquez"),e(),t(56,"p",19)(57,"strong"),n(58,"Fecha de pr\xE9stamo:"),e(),n(59," 10 abril 2025"),e(),t(60,"p",20)(61,"strong"),n(62,"Fecha de devoluci\xF3n:"),e(),n(63," 25 abril 2025"),e()()()()()()())},styles:["body[_ngcontent-%COMP%]{background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{background-color:#fff;height:100%;border-right:1px solid #ddd}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-radius:8px}.content-section[_ngcontent-%COMP%]{padding:30px}.card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 8px #00000008}.card-title[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.card-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#6c757d}.card-text[_ngcontent-%COMP%]{font-size:.95rem}"]})};var En=["*"];var yn=["dialog"];var ii={animation:!0,transitionTimerDelayMs:5},Sn=(()=>{let i=class i{constructor(){this.animation=ii.animation}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();function Dn(a){let{transitionDelay:i,transitionDuration:o}=window.getComputedStyle(a),r=parseFloat(i),s=parseFloat(o);return(r+s)*1e3}function ni(a){return typeof a=="string"}function Ct(a){return a!=null}function Cn(a){return a&&a.then}function oi(a){return(a||document.body).getBoundingClientRect()}function On(a){return i=>new wt(o=>{let r=u=>a.run(()=>o.next(u)),s=u=>a.run(()=>o.error(u)),d=()=>a.run(()=>o.complete());return i.subscribe({next:r,error:s,complete:d})})}var wn=()=>{},{transitionTimerDelayMs:Rn}=ii,it=new Map,le=(a,i,o,r)=>{let s=r.context||{},d=it.get(i);if(d)switch(r.runningTransition){case"continue":return Rt;case"stop":a.run(()=>d.transition$.complete()),s=Object.assign(d.context,s),it.delete(i)}let u=o(i,r.animation,s)||wn;if(!r.animation||window.getComputedStyle(i).transitionProperty==="none")return a.run(()=>u()),ct(void 0).pipe(On(a));let f=new Z,R=new Z,x=f.pipe(Mt(!0));it.set(i,{transition$:f,complete:()=>{R.next(),R.complete()},context:s});let F=Dn(i);return a.runOutsideAngular(()=>{let I=ne(i,"transitionend").pipe(H(x),Re(({target:se})=>se===i)),G=xt(F+Rn).pipe(H(x));Tt(G,I,R).pipe(H(x)).subscribe(()=>{it.delete(i),a.run(()=>{u(),f.next(),f.complete()})})}),f.asObservable()};var Jr=(()=>{let a=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,i=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(a()||i()):!1})();var xn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ri(a){let i=Array.from(a.querySelectorAll(xn)).filter(o=>o.tabIndex!==-1);return[i[0],i[i.length-1]]}var Tn=(a,i,o,r=!1)=>{a.runOutsideAngular(()=>{let s=ne(i,"focusin").pipe(H(o),ut(d=>d.target));ne(i,"keydown").pipe(H(o),Re(d=>d.key==="Tab"),mt(s)).subscribe(([d,u])=>{let[f,R]=ri(i);(u===f||u===i)&&d.shiftKey&&(R.focus(),d.preventDefault()),u===R&&!d.shiftKey&&(f.focus(),d.preventDefault())}),r&&ne(i,"click").pipe(H(o),mt(s),ut(d=>d[1])).subscribe(d=>d.focus())})};var Qr=new Date(1882,10,12),Yr=new Date(2174,10,25);var Kr=1e3*60*60*24;var Ot=1080,Mn=24*Ot,In=12*Ot+793,Zr=29*Mn+In,Xr=11*Ot+204;var Nn=(()=>{let i=class i{constructor(){this._ngbConfig=A(Sn),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(r){this._animation=r}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})(),we=class{constructor(i,o,r){this.nodes=i,this.viewRef=o,this.componentRef=r}};var An=(()=>{let i=class i{constructor(){this._document=A(Ae)}hide(){let r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),s=this._document.body,d=s.style,{overflow:u,paddingRight:f}=d;if(r>0){let R=parseFloat(window.getComputedStyle(s).paddingRight);d.paddingRight=`${R+r}px`}return d.overflow="hidden",()=>{r>0&&(d.paddingRight=f),d.overflow=u}}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})(),Fn=["animation","backdropClass"],kn=(()=>{let i=class i{constructor(){this._nativeElement=A(_t).nativeElement,this._zone=A(Fe),this._injector=A(ue),this._cdRef=A(Ve)}ngOnInit(){gt({mixedReadWrite:()=>le(this._zone,this._nativeElement,(r,s)=>{s&&oi(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return le(this._zone,this._nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}updateOptions(r){Fn.forEach(s=>{Ct(r[s])&&(this[s]=r[s])}),this._cdRef.markForCheck()}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=E({type:i,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,d){s&2&&(Pe("modal-backdrop"+(d.backdropClass?" "+d.backdropClass:"")),xe("show",!d.animation)("fade",d.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(s,d){},encapsulation:2});let a=i;return a})(),nt=class{update(i){}close(i){}dismiss(i){}},St=class{update(i){this._windowCmptRef.instance.updateOptions(i),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._backdropCmptRef.instance.updateOptions(i)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(H(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(H(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(i,o,r,s){this._windowCmptRef=i,this._contentRef=o,this._backdropCmptRef=r,this._beforeDismiss=s,this._closed=new Z,this._dismissed=new Z,this._hidden=new Z,i.instance.dismissEvent.subscribe(d=>{this.dismiss(d)}),this.result=new Promise((d,u)=>{this._resolve=d,this._reject=u}),this.result.then(null,()=>{})}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(i);else{let o=this._beforeDismiss();Cn(o)?o.then(r=>{r!==!1&&this._dismiss(i)},()=>{}):o!==!1&&this._dismiss(i)}}_removeModalElements(){let i=this._windowCmptRef.instance.hide(),o=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ct(void 0);i.subscribe(()=>{let{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),o.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ne(i,o).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Dt=function(a){return a[a.BACKDROP_CLICK=0]="BACKDROP_CLICK",a[a.ESC=1]="ESC",a}(Dt||{}),Pn=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],Bn=(()=>{let i=class i{constructor(){this._document=A(Ae),this._elRef=A(_t),this._zone=A(Fe),this._injector=A(ue),this._cdRef=A(Ve),this._closed$=new Z,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new ft,this.shown=new Z,this.hidden=new Z}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":ni(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,gt({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:r}=this._elRef,s={animation:this.animation,runningTransition:"stop"},d=le(this._zone,r,()=>r.classList.remove("show"),s),u=le(this._zone,this._dialogEl.nativeElement,()=>{},s),f=Ne(d,u);return f.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),f}updateOptions(r){Pn.forEach(s=>{Ct(r[s])&&(this[s]=r[s])}),this._cdRef.markForCheck()}_show(){let r={animation:this.animation,runningTransition:"continue"},s=le(this._zone,this._elRef.nativeElement,(u,f)=>{f&&oi(u),u.classList.add("show")},r),d=le(this._zone,this._dialogEl.nativeElement,()=>{},r);Ne(s,d).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{ne(r,"keydown").pipe(H(this._closed$),Re(d=>d.key==="Escape")).subscribe(d=>{this.keyboard?requestAnimationFrame(()=>{d.defaultPrevented||this._zone.run(()=>this.dismiss(Dt.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let s=!1;ne(this._dialogEl.nativeElement,"mousedown").pipe(H(this._closed$),Nt(()=>s=!1),It(()=>ne(r,"mouseup").pipe(H(this._closed$),pt(1))),Re(({target:d})=>r===d)).subscribe(()=>{s=!0}),ne(r,"click").pipe(H(this._closed$)).subscribe(({target:d})=>{r===d&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!s&&this._zone.run(()=>this.dismiss(Dt.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){let s=r.querySelector("[ngbAutofocus]"),d=ri(r)[0];(s||d||r).focus()}}_restoreFocus(){let r=this._document.body,s=this._elWithFocus,d;s&&s.focus&&r.contains(s)?d=s:d=r,this._zone.runOutsideAngular(()=>{setTimeout(()=>d.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&le(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=E({type:i,selectors:[["ngb-modal-window"]],viewQuery:function(s,d){if(s&1&&jt(yn,7),s&2){let u;Gt(u=Ut())&&(d._dialogEl=u.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(s,d){s&2&&(ke("aria-modal",!0)("aria-labelledby",d.ariaLabelledBy)("aria-describedby",d.ariaDescribedBy)("role",d.role),Pe("modal d-block"+(d.windowClass?" "+d.windowClass:"")),xe("fade",d.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:En,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(s,d){s&1&&(Lt(),t(0,"div",1,0)(2,"div",2),Vt(3),e()()),s&2&&Pe("modal-dialog"+(d.size?" modal-"+d.size:"")+(d.centered?" modal-dialog-centered":"")+d.fullscreenClass+(d.scrollable?" modal-dialog-scrollable":"")+(d.modalDialogClass?" "+d.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let a=i;return a})(),Ln=(()=>{let i=class i{constructor(){this._applicationRef=A(Bt),this._injector=A(ue),this._environmentInjector=A(ht),this._document=A(Ae),this._scrollBar=A(An),this._activeWindowCmptHasChanged=new Z,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new ft;let r=A(Fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let s=this._windowCmpts[this._windowCmpts.length-1];Tn(r,s.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(s.location.nativeElement)}})}_restoreScrollBar(){let r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,s,d){let u=d.container instanceof HTMLElement?d.container:Ct(d.container)?this._document.querySelector(d.container):this._document.body;if(!u)throw new Error(`The specified modal container "${d.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let f=new nt;r=d.injector||r;let R=r.get(ht,null)||this._environmentInjector,x=this._getContentRef(r,R,s,f,d),F=d.backdrop!==!1?this._attachBackdrop(u):void 0,I=this._attachWindowComponent(u,x.nodes),G=new St(I,x,F,d.beforeDismiss);return this._registerModalRef(G),this._registerWindowCmpt(I),G.hidden.pipe(pt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),f.close=se=>{G.close(se)},f.dismiss=se=>{G.dismiss(se)},f.update=se=>{G.update(se)},G.update(d),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),F&&F.instance&&F.changeDetectorRef.detectChanges(),I.changeDetectorRef.detectChanges(),G}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(s=>s.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let s=je(kn,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(s.hostView),r.appendChild(s.location.nativeElement),s}_attachWindowComponent(r,s){let d=je(Bn,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:s});return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_getContentRef(r,s,d,u,f){return d?d instanceof Pt?this._createFromTemplateRef(d,u):ni(d)?this._createFromString(d):this._createFromComponent(r,s,d,u,f):new we([])}_createFromTemplateRef(r,s){let d={$implicit:s,close(f){s.close(f)},dismiss(f){s.dismiss(f)}},u=r.createEmbeddedView(d);return this._applicationRef.attachView(u),new we([u.rootNodes],u)}_createFromString(r){let s=this._document.createTextNode(`${r}`);return new we([[s]])}_createFromComponent(r,s,d,u,f){let R=ue.create({providers:[{provide:nt,useValue:u}],parent:r}),x=je(d,{environmentInjector:s,elementInjector:R}),F=x.location.nativeElement;return f.scrollable&&F.classList.add("component-host-scrollable"),this._applicationRef.attachView(x.hostView),new we([[F]],x.hostView,x)}_setAriaHidden(r){let s=r.parentElement;s&&r!==this._document.body&&(Array.from(s.children).forEach(d=>{d!==r&&d.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(d,d.getAttribute("aria-hidden")),d.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){let s=()=>{let d=this._modalRefs.indexOf(r);d>-1&&(this._modalRefs.splice(d,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(s,s)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{let s=this._windowCmpts.indexOf(r);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})(),ai=(()=>{let i=class i{constructor(){this._injector=A(ue),this._modalStack=A(Ln),this._config=A(Nn)}open(r,s={}){let d=Y(de(Y({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._injector,r,d)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();var ea=new At("live announcer delay",{providedIn:"root",factory:()=>100});function jn(a,i){if(a&1){let o=V();t(0,"tr")(1,"td",8),n(2),e(),t(3,"td",8),n(4),e(),t(5,"td",8),n(6),e(),t(7,"td",8),n(8),e(),t(9,"td",8),n(10),e(),t(11,"td",15)(12,"button",16),S("click",function(){let s=g(o).$implicit,d=_(),u=D(31);return v(d.abrirModalEditar(u,s))}),p(13,"i",17),n(14," Editar "),e(),t(15,"button",18),S("click",function(){let s=g(o).$implicit,d=_();return v(d.confirmarEliminacion(s.id))}),p(16,"i",19),n(17," Eliminar "),e()()()}if(a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),h(o.codigoEjemplar),l(2),h(o.libro==null?null:o.libro.titulo),l(2),h(o.estado),l(2),h(o.ubicacion)}}function Gn(a,i){a&1&&(t(0,"tr")(1,"td",20),n(2,"No hay ejemplares registrados"),e()())}function Un(a,i){if(a&1&&(t(0,"option",40),n(1),e()),a&2){let o=i.$implicit;c("value",o.id),l(),W(" ",o.titulo," - ",o.editorial," ")}}function Hn(a,i){a&1&&(t(0,"span"),n(1,"Guardar"),e())}function $n(a,i){a&1&&p(0,"span",41)}function Wn(a,i){if(a&1){let o=V();t(0,"div",21)(1,"h4",22),n(2,"Agregar Nuevo Ejemplar"),e(),t(3,"button",23),S("click",function(){let s=g(o).$implicit;return v(s.dismiss())}),e()(),t(4,"div",24)(5,"form",25,2),S("ngSubmit",function(){g(o);let s=_();return v(s.crearEjemplar())}),t(7,"div",26)(8,"div",27)(9,"label",28),n(10,"Libro"),e(),t(11,"select",29),w("ngModelChange",function(s){g(o);let d=_();return O(d.nuevoEjemplar.libroId,s)||(d.nuevoEjemplar.libroId=s),v(s)}),m(12,Un,2,3,"option",30),e()(),t(13,"div",31)(14,"label",32),n(15,"C\xF3digo del Ejemplar"),e(),t(16,"input",33),w("ngModelChange",function(s){g(o);let d=_();return O(d.nuevoEjemplar.codigoEjemplar,s)||(d.nuevoEjemplar.codigoEjemplar=s),v(s)}),e()(),t(17,"div",31)(18,"label",34),n(19,"Ubicaci\xF3n"),e(),t(20,"input",35),w("ngModelChange",function(s){g(o);let d=_();return O(d.nuevoEjemplar.ubicacion,s)||(d.nuevoEjemplar.ubicacion=s),v(s)}),e()()(),t(21,"div",36)(22,"button",37),S("click",function(){let s=g(o).$implicit;return v(s.dismiss())}),n(23,"Cancelar"),e(),t(24,"button",38),m(25,Hn,2,0,"span",10)(26,$n,1,0,"span",39),e()()()()}if(a&2){let o=D(6),r=_();l(11),C("ngModel",r.nuevoEjemplar.libroId),l(),c("ngForOf",r.libros),l(4),C("ngModel",r.nuevoEjemplar.codigoEjemplar),l(4),C("ngModel",r.nuevoEjemplar.ubicacion),l(4),c("disabled",r.guardando||!o.valid),l(),c("ngIf",!r.guardando),l(),c("ngIf",r.guardando)}}function zn(a,i){if(a&1&&(t(0,"option",40),n(1),e()),a&2){let o=i.$implicit;c("value",o),l(),b(" ",o," ")}}function qn(a,i){a&1&&(t(0,"span"),n(1,"Actualizar"),e())}function Jn(a,i){a&1&&p(0,"span",41)}function Qn(a,i){if(a&1){let o=V();t(0,"form",25,3),S("ngSubmit",function(){g(o);let s=_(2);return v(s.actualizarEjemplar())}),t(2,"input",43),w("ngModelChange",function(s){g(o);let d=_(2);return O(d.ejemplarEditando.id,s)||(d.ejemplarEditando.id=s),v(s)}),e(),t(3,"div",26)(4,"div",27)(5,"label",44),n(6,"Libro"),e(),p(7,"input",45),e(),t(8,"div",31)(9,"label",46),n(10,"C\xF3digo del Ejemplar"),e(),t(11,"input",47),w("ngModelChange",function(s){g(o);let d=_(2);return O(d.ejemplarEditando.codigoEjemplar,s)||(d.ejemplarEditando.codigoEjemplar=s),v(s)}),e()(),t(12,"div",31)(13,"label",48),n(14,"Estado"),e(),t(15,"select",49),w("ngModelChange",function(s){g(o);let d=_(2);return O(d.ejemplarEditando.estado,s)||(d.ejemplarEditando.estado=s),v(s)}),m(16,zn,2,2,"option",30),e()(),t(17,"div",27)(18,"label",50),n(19,"Ubicaci\xF3n"),e(),t(20,"input",51),w("ngModelChange",function(s){g(o);let d=_(2);return O(d.ejemplarEditando.ubicacion,s)||(d.ejemplarEditando.ubicacion=s),v(s)}),e()()(),t(21,"div",36)(22,"button",37),S("click",function(){g(o);let s=_().$implicit;return v(s.dismiss())}),n(23,"Cancelar"),e(),t(24,"button",38),m(25,qn,2,0,"span",10)(26,Jn,1,0,"span",39),e()()()}if(a&2){let o=D(1),r=_(2);l(2),C("ngModel",r.ejemplarEditando.id),l(5),c("value",r.ejemplarEditando.libro==null?null:r.ejemplarEditando.libro.titulo),l(4),C("ngModel",r.ejemplarEditando.codigoEjemplar),l(4),C("ngModel",r.ejemplarEditando.estado),l(),c("ngForOf",r.estados),l(4),C("ngModel",r.ejemplarEditando.ubicacion),l(4),c("disabled",r.guardando||!o.valid),l(),c("ngIf",!r.guardando),l(),c("ngIf",r.guardando)}}function Yn(a,i){if(a&1){let o=V();t(0,"div",21)(1,"h4",22),n(2,"Editar Ejemplar"),e(),t(3,"button",23),S("click",function(){let s=g(o).$implicit;return v(s.dismiss())}),e()(),t(4,"div",24),m(5,Qn,27,9,"form",42),e()}if(a&2){let o=_();l(5),c("ngIf",o.ejemplarEditando)}}var ot=class a{constructor(i,o,r){this.ejemplaresService=i;this.librosService=o;this.modalService=r}ejemplares=[];libros=[];estados=Object.values(Ie);nuevoEjemplar={codigoEjemplar:"",estado:"DISPONIBLE",ubicacion:"",libroId:void 0};ejemplarEditando=null;cargando=!1;guardando=!1;ngOnInit(){this.cargarDatos()}cargarDatos(){this.cargando=!0,this.ejemplaresService.getEjemplares().subscribe({next:i=>{this.ejemplares=i,this.cargando=!1},error:i=>{console.error("Error al cargar ejemplares",i),this.cargando=!1}}),this.librosService.getLibros().subscribe({next:i=>this.libros=i,error:i=>console.error("Error al cargar libros",i)})}abrirModalCrear(i){this.nuevoEjemplar={codigoEjemplar:"",estado:"DISPONIBLE",ubicacion:"",libroId:void 0},this.modalService.open(i)}abrirModalEditar(i,o){this.ejemplarEditando=Y({},o),this.modalService.open(i)}crearEjemplar(){this.guardando=!0,this.ejemplaresService.crearEjemplar(this.nuevoEjemplar).subscribe({next:()=>{this.cargarDatos(),this.modalService.dismissAll(),this.guardando=!1,console.log("Datos a enviar:",this.nuevoEjemplar)},error:i=>{console.error("Error al crear ejemplar",i),this.guardando=!1}})}actualizarEjemplar(){this.ejemplarEditando&&(this.guardando=!0,this.ejemplaresService.actualizarEjemplar(this.ejemplarEditando).subscribe({next:()=>{this.cargarDatos(),this.modalService.dismissAll(),this.guardando=!1},error:i=>{console.error("Error al actualizar ejemplar",i),this.guardando=!1}}))}confirmarEliminacion(i){confirm("\xBFEst\xE1 seguro de que desea eliminar este ejemplar?")&&this.ejemplaresService.eliminarEjemplar(i).subscribe({next:()=>this.cargarDatos(),error:o=>console.error("Error al eliminar ejemplar",o)})}static \u0275fac=function(o){return new(o||a)(y(Oe),y(De),y(ai))};static \u0275cmp=E({type:a,selectors:[["app-ejemplares"]],decls:32,vars:2,consts:[["modalCrear",""],["modalEditar",""],["formCrear","ngForm"],["formEditar","ngForm"],[1,"container-fluid"],[1,"row","mt-4","mb-2"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row","d-flex","justify-content-center"],[1,"col-2"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle"],[1,"d-flex","justify-content-evenly"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],["colspan","5",1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-12"],["for","libroSelect",1,"form-label"],["id","libroSelect","name","libroId","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["for","codigoEjemplar",1,"form-label"],["type","text","id","codigoEjemplar","name","codigoEjemplar","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","ubicacion",1,"form-label"],["type","text","id","ubicacion","name","ubicacion","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm"],[3,"ngSubmit",4,"ngIf"],["type","hidden","name","id",3,"ngModelChange","ngModel"],[1,"form-label"],["type","text","readonly","",1,"form-control",3,"value"],["for","editCodigo",1,"form-label"],["type","text","id","editCodigo","name","codigoEjemplar","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editEstado",1,"form-label"],["id","editEstado","name","estado","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","editUbicacion",1,"form-label"],["type","text","id","editUbicacion","name","ubicacion","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(o,r){if(o&1){let s=V();t(0,"div",4)(1,"div",5)(2,"h2"),n(3,"Lista de Ejemplares"),e(),t(4,"div",6)(5,"table",7)(6,"thead")(7,"tr")(8,"th",8),n(9,"#"),e(),t(10,"th",8),n(11,"C\xF3digo"),e(),t(12,"th",8),n(13,"Libro"),e(),t(14,"th",8),n(15,"Estado"),e(),t(16,"th",8),n(17,"Ubicaci\xF3n"),e(),t(18,"th",8),n(19,"Acciones"),e()()(),t(20,"tbody"),m(21,jn,18,5,"tr",9)(22,Gn,3,0,"tr",10),e()()()(),t(23,"div",11)(24,"div",12)(25,"button",13),S("click",function(){g(s);let u=D(29);return v(r.abrirModalCrear(u))}),p(26,"i",14),n(27," Agregar Ejemplar "),e()()()(),m(28,Wn,27,7,"ng-template",null,0,z)(30,Yn,6,1,"ng-template",null,1,z)}o&2&&(l(21),c("ngForOf",r.ejemplares),l(),c("ngIf",r.ejemplares.length===0))},dependencies:[M,k,B,Se,te,be,Ee,J,ve,Q,ee,re,_e,He],encapsulation:2})};function Kn(a,i){if(a&1){let o=V();t(0,"tr")(1,"td",8),n(2),e(),t(3,"td",8),n(4),e(),t(5,"td",8),n(6),e(),t(7,"td",8),n(8),e(),t(9,"td",8),n(10),e(),t(11,"td",8),n(12),e(),t(13,"td",8),n(14),e(),t(15,"td",8),n(16),T(17,"date"),e(),t(18,"td",8)(19,"span",10),n(20),e()(),t(21,"td",8)(22,"button",11),S("click",function(){let s=g(o).$implicit,d=_();return v(d.confirmarCambioEstado(s))}),p(23,"i",12),n(24),e()()()}if(a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),W("",o.nombres," ",o.apellidos),l(2),h(o.username),l(2),h(o.dni),l(2),h(o.telefono),l(2),h(o.direccion),l(2),h(o.genero),l(2),h(N(17,14,o.fechaNacimiento,"dd/MM/yyyy")),l(3),c("ngClass",o.enabled?"text-success":"text-danger"),l(),b(" ",o.enabled?"Activo":"Inactivo"," "),l(2),c("ngClass",o.enabled?"btn-danger":"btn-success"),l(),c("ngClass",o.enabled?"bi-person-x":"bi-person-check"),l(),b(" ",o.enabled?"Desactivar":"Activar"," ")}}var rt=class a{constructor(i){this.usuariosService=i}usuarios=[];terminoBusqueda="";ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.usuariosService.getUsuarios().subscribe({next:i=>this.usuarios=i,error:i=>console.error("Error al cargar usuarios",i)})}buscarUsuario(){this.terminoBusqueda.trim()?this.usuariosService.buscarUsuarios(this.terminoBusqueda).subscribe({next:i=>this.usuarios=i,error:i=>console.error("Error al buscar usuario",i)}):this.cargarUsuarios()}confirmarCambioEstado(i){let r=`\xBFEst\xE1 seguro de que desea ${i.enabled?"desactivar":"activar"} al usuario "${i.nombres} ${i.apellidos}"?`;confirm(r)&&this.cambiarEstado(i)}cambiarEstado(i){let o=i.enabled?"desactivarUsuario":"activarUsuario";(i.enabled?this.usuariosService.desactivarUsuario(i.id):this.usuariosService.activarUsuario(i.id)).subscribe({next:()=>{i.enabled=!i.enabled},error:s=>{console.error(`Error al ${o}`,s),alert(`No se pudo ${i.enabled?"desactivar":"activar"} el usuario.`)}})}static \u0275fac=function(o){return new(o||a)(y(Ce))};static \u0275cmp=E({type:a,selectors:[["app-usuarios"]],decls:35,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-4"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Ingrese el nombre del usuario",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-sm",3,"click","ngClass"],[1,"bi",3,"ngClass"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),n(3,"Lista de Usuarios"),e(),t(4,"div",2)(5,"div",3)(6,"input",4),w("ngModelChange",function(d){return O(r.terminoBusqueda,d)||(r.terminoBusqueda=d),d}),e(),t(7,"button",5),S("click",function(){return r.buscarUsuario()}),n(8,"Buscar"),e()()(),t(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th",8),n(14,"#"),e(),t(15,"th",8),n(16,"Nombre"),e(),t(17,"th",8),n(18,"Correo"),e(),t(19,"th",8),n(20,"DNI"),e(),t(21,"th",8),n(22,"Telefono"),e(),t(23,"th",8),n(24,"Direcci\xF3n"),e(),t(25,"th",8),n(26,"G\xE9nero"),e(),t(27,"th",8),n(28,"Fecha de Nacimiento"),e(),t(29,"th",8),n(30,"Estado"),e(),t(31,"th",8),n(32,"Acci\xF3n"),e()()(),t(33,"tbody"),m(34,Kn,25,17,"tr",9),e()()()()()),o&2&&(l(6),C("ngModel",r.terminoBusqueda),l(28),c("ngForOf",r.usuarios))},dependencies:[M,X,k,U,Se,J,Q,_e],encapsulation:2})};function Zn(a,i){if(a&1&&(t(0,"tr")(1,"td",4),n(2),e(),t(3,"td",4),n(4),e(),t(5,"td",4),n(6),e(),t(7,"td",4),n(8),e(),t(9,"td",4),n(10),T(11,"date"),e(),t(12,"td",4),n(13),T(14,"date"),e(),t(15,"td",4)(16,"span",6),n(17),T(18,"date"),e()(),t(19,"td",4),n(20),e()()),a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),W("",o.user.nombres," ",o.user.apellidos),l(2),h(o.ejemplar.libro==null?null:o.ejemplar.libro.titulo),l(2),h(o.ejemplar.codigoEjemplar),l(2),h(N(11,10,o.fechaReserva,"dd/MM/yyyy")),l(3),h(N(14,13,o.fechaEstimadaDevolucion,"dd/MM/yyyy")),l(3),c("ngClass",o.fechaRealDevolucion==null?"text-danger":"text-dark"),l(),b(" ",o.fechaRealDevolucion==null?"No devuelto":N(18,16,o.fechaRealDevolucion,"dd/MM/yyyy")," "),l(3),h(o.estado)}}var at=class a{constructor(i){this.reservasService=i}reservas=[];ngOnInit(){this.cargarReservas()}cargarReservas(){this.reservasService.getReservasPendientes().subscribe({next:i=>this.reservas=i,error:i=>console.error("Error al cargar las reservas",i)})}static \u0275fac=function(o){return new(o||a)(y(ie))};static \u0275cmp=E({type:a,selectors:[["app-reservas"]],decls:26,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),n(3,"Reservas Pendientes"),e(),t(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),n(9,"#"),e(),t(10,"th",4),n(11,"Usuario"),e(),t(12,"th",4),n(13,"Libro"),e(),t(14,"th",4),n(15,"C\xF3digo de ejemplar"),e(),t(16,"th",4),n(17,"Fecha Reserva"),e(),t(18,"th",4),n(19,"Fecha Estimada de Devoluci\xF3n"),e(),t(20,"th",4),n(21,"Fecha Real de Devoluci\xF3n"),e(),t(22,"th",4),n(23,"Estado"),e()()(),t(24,"tbody"),m(25,Zn,21,19,"tr",5),e()()()()()),o&2&&(l(25),c("ngForOf",r.reservas))},dependencies:[M,X,k,U],encapsulation:2})};function Xn(a,i){if(a&1&&(t(0,"tr")(1,"td",4),n(2),e(),t(3,"td",4),n(4),e(),t(5,"td",4),n(6),e(),t(7,"td",4),n(8),e(),t(9,"td",4),n(10),T(11,"date"),e(),t(12,"td",4),n(13),T(14,"date"),e(),t(15,"td",4)(16,"span",6),n(17),T(18,"date"),e()(),t(19,"td",4),n(20),e()()),a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),W("",o.user.nombres," ",o.user.apellidos),l(2),h(o.ejemplar.libro==null?null:o.ejemplar.libro.titulo),l(2),h(o.ejemplar.codigoEjemplar),l(2),h(N(11,10,o.fechaReserva,"dd/MM/yyyy")),l(3),h(N(14,13,o.fechaEstimadaDevolucion,"dd/MM/yyyy")),l(3),c("ngClass",o.fechaRealDevolucion==null?"text-danger":"text-dark"),l(),b(" ",o.fechaRealDevolucion==null?"No devuelto":N(18,16,o.fechaRealDevolucion,"dd/MM/yyyy")," "),l(3),h(o.estado)}}var st=class a{constructor(i){this.reservasService=i}reservas=[];ngOnInit(){this.cargarReservas()}cargarReservas(){this.reservasService.getReservas().subscribe({next:i=>this.reservas=i,error:i=>console.error("Error al cargar las reservas",i)})}static \u0275fac=function(o){return new(o||a)(y(ie))};static \u0275cmp=E({type:a,selectors:[["app-historial"]],decls:26,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),n(3,"Historial de reservas"),e(),t(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),n(9,"#"),e(),t(10,"th",4),n(11,"Usuario"),e(),t(12,"th",4),n(13,"Libro"),e(),t(14,"th",4),n(15,"C\xF3digo de ejemplar"),e(),t(16,"th",4),n(17,"Fecha Reserva"),e(),t(18,"th",4),n(19,"Fecha Estimada de Devoluci\xF3n"),e(),t(20,"th",4),n(21,"Fecha Real de Devoluci\xF3n"),e(),t(22,"th",4),n(23,"Estado"),e()()(),t(24,"tbody"),m(25,Xn,21,19,"tr",5),e()()()()()),o&2&&(l(25),c("ngForOf",r.reservas))},dependencies:[M,X,k,U],encapsulation:2})};function eo(a,i){if(a&1){let o=V();t(0,"tr")(1,"td",9),n(2),e(),t(3,"td",9),n(4),e(),t(5,"td",9),n(6),e(),t(7,"td",9),n(8),e(),t(9,"td",9),n(10),T(11,"date"),e(),t(12,"td",9),n(13),T(14,"date"),e(),t(15,"td",9)(16,"span",11),n(17),T(18,"date"),e()(),t(19,"td",9),n(20),e(),t(21,"td",9)(22,"button",12),S("click",function(){let s=g(o).$implicit,d=_();return v(d.enviarRecordatorio(s))}),p(23,"i",5),n(24," Enviar "),e()()()}if(a&2){let o=i.$implicit,r=i.index;l(2),h(r+1),l(2),W("",o.user.nombres," ",o.user.apellidos),l(2),h(o.ejemplar.libro==null?null:o.ejemplar.libro.titulo),l(2),h(o.ejemplar.codigoEjemplar),l(2),h(N(11,10,o.fechaReserva,"dd/MM/yyyy")),l(3),h(N(14,13,o.fechaEstimadaDevolucion,"dd/MM/yyyy")),l(3),c("ngClass",o.fechaRealDevolucion==null?"text-danger":"text-dark"),l(),b(" ",o.fechaRealDevolucion==null?"No devuelto":N(18,16,o.fechaRealDevolucion,"dd/MM/yyyy")," "),l(3),h(o.estado)}}var lt=class a{constructor(i){this.reservasService=i}reservas=[];ngOnInit(){this.cargarReservas()}cargarReservas(){this.reservasService.getReservasAtrasadas().subscribe({next:i=>this.reservas=i,error:i=>console.error("Error al cargar las reservas",i)})}enviarRecordatorio(i){let o=i.user.telefono,r=i.ejemplar.libro?.titulo??"un libro reservado",s=encodeURIComponent(`Hola ${i.user.nombres}, este es un recordatorio para devolver "${r}". Por favor, ac\xE9rquese a la biblioteca lo antes posible.`);if(!o){alert("Este usuario no tiene un n\xFAmero de tel\xE9fono registrado.");return}if(window.confirm(`\xBFDeseas enviar un recordatorio por WhatsApp a ${i.user.nombres} ${i.user.apellidos}?`)){let u=`https://wa.me/51929281169?text=${s}`;window.open(u,"_blank")}}enviarRecordatorioTodos(){let i=window.confirm("\xBFDeseas enviar un recordatorio por WhatsApp a todos?")}static \u0275fac=function(o){return new(o||a)(y(ie))};static \u0275cmp=E({type:a,selectors:[["app-atrasadas"]],decls:33,vars:1,consts:[[1,"container-fluid"],[1,"m-2","p-1"],[1,"row"],[1,"d-flex","justify-content-center",3,"click"],[1,"btn","btn-primary","btn-sm"],[1,"bi","bi-send-exclamation-fill"],[1,"row","mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-warning","btn-sm",3,"click"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"h2",1),n(2,"Reservas Atrasadas"),e(),t(3,"div",2)(4,"div",3),S("click",function(){return r.enviarRecordatorioTodos()}),t(5,"button",4),p(6,"i",5),n(7," Enviar Recordatorio "),e()()(),t(8,"div",6)(9,"div",7)(10,"table",8)(11,"thead")(12,"tr")(13,"th",9),n(14,"#"),e(),t(15,"th",9),n(16,"Usuario"),e(),t(17,"th",9),n(18,"Libro"),e(),t(19,"th",9),n(20,"C\xF3digo de ejemplar"),e(),t(21,"th",9),n(22,"Fecha Reserva"),e(),t(23,"th",9),n(24,"Fecha Estimada de Devoluci\xF3n"),e(),t(25,"th",9),n(26,"Fecha Real de Devoluci\xF3n"),e(),t(27,"th",9),n(28,"Estado"),e(),t(29,"th",9),n(30,"Recordatorio"),e()()(),t(31,"tbody"),m(32,eo,25,19,"tr",10),e()()()()()),o&2&&(l(32),c("ngForOf",r.reservas))},dependencies:[M,X,k,U],encapsulation:2})};var si=[{path:"",component:Ye,children:[{path:"",component:Je},{path:"catalogo",component:Ke},{path:"eventos",component:Ze},{path:"detalle/:id",loadComponent:()=>import("./chunk-BGEEEJLK.js").then(a=>a.Detalle)},{path:"prestamo",component:yt},{path:"prestamo/:id",loadComponent:()=>import("./chunk-6UQ7OKM7.js").then(a=>a.Prestamo)},{path:"detalle",component:Yt},{path:"prestamo",component:yt},{path:"registrar",component:Xe},{path:"cuenta",component:et},{path:"mis-reservas",component:tt}]},{path:"dashboard",component:Qe,children:[{path:"",component:qe},{path:"libros",component:We},{path:"ejemplares",component:ot},{path:"usuarios",component:rt},{path:"reservas",component:at},{path:"historial",component:st},{path:"atrasadas",component:lt}]}];var li={providers:[Ft(),$t({eventCoalescing:!0}),Jt(si),zt()]};var dt=class a{title="frontend-reserva-libros";static \u0275fac=function(o){return new(o||a)};static \u0275cmp=E({type:a,selectors:[["app-root"]],decls:1,vars:0,template:function(o,r){o&1&&p(0,"router-outlet")},dependencies:[me],encapsulation:2})};Wt(dt,li).catch(a=>console.error(a));
